!function(){function e(){var e=Array.prototype.slice.call(arguments);e.unshift("[Raptor]: "),(console.debug||console.log).apply(console,e)}function t(e){if(!console||!console.error)throw e;var t=Array.prototype.slice.call(arguments);if(console.error.apply)console.error.apply(console,t),t[0]instanceof Error&&(console.error.apply(console,[t[0].toString()]),console.error.apply(console,[t[0].stack]));else for(var i=0,n=t.length;n>i;i++)console.error(t[i])}function n(e,i){t(e+", got: ",i,typeof i)}function o(e,i,n){fo[e]&&t("Locale "+e+" has already been registered, and will be overwritten."),ho>co&&t("Locale "+e+" registered."),fo[e]=n,bo[e]=i}function a(e,i,n){if("undefined"==typeof fo[e])o(e,i,n);else{ho>co&&t("Locale "+e+" extended."),n=n||i;for(var a in n)fo[e][a]=n[a]}}function r(t){go!==t&&(e("Changing locale",t),go=t,Io.eachInstance(function(){this.localeChange()}))}function s(e,i){if("undefined"!=typeof fo[go]&&"undefined"!=typeof fo[go][e])return fo[go][e];if("undefined"!=typeof fo[mo]&&"undefined"!=typeof fo[mo][e])return fo[mo][e];for(var n in bo)if("undefined"!=typeof fo[n][e])return fo[n][e];return i?!1:(ho>=co&&t("Missing locale string: "+e),e)}function l(e,t){if(!go){var i=Io.persist("locale");i&&(go=i)}if(go||(go="en"),e=s(e,t===!1),e===!1)return!1;if(t){for(var n in t)e=e.replace("{{"+n+"}}",t[n]);return e}return e}function c(e){if(!e||!e.id){var t;do t="ruid-"+Math.random().toString().replace(".","");while(document.getElementById(t));if(!e)return t;e.id=t}return e.id}function u(e,t){return p(e,t)[0]}function p(e,t){var i=document.createElement(t||"div");return i.innerHTML=e,i.children}function d(e){for(var t in e)this[t]=e[t]}function h(e){var t=!1;for(var i in vo)"function"==typeof vo[i]?vo[i]()&&(t=!0):vo[i]&&(t=!0);if(t){var n="There are unsaved changes on this page. Are you sure you wish to navigate away?";return(e||window.event).returnValue=n,n}}function g(e,t){return e.replace(/([A-Z])/g,function(e){return(t||"-")+e.toLowerCase()})}function m(e){return yo[e]}function f(e,i){return e=e.replace(/tr\(['"]{1}(.*?)['"]{1}\)/g,function(e,t){return t=t.replace(/\\(.?)/g,function(e,t){switch(t){case"\\":return"\\";case"0":return"\0";case"":return"";default:return t}}),l(t)}),i=xo.extend({},this.options,i||{}),i=b(i),e=e.replace(/\{\{(.*?)\}\}/g,function(e,n){return"undefined"==typeof i[n]&&t(new Error("Missing template variable: "+n)),i[n]})}function b(e,t,i){t=t?t+".":"";var n=5;i||(i=1);var o={};for(var a in e)if("object"==typeof e[a]&&n>i){var r=b(e[a],t+a,++i);for(var s in r)o[s]=r[s]}else o[t+a]=e[a];return o}function v(e){return!isNaN(e-0)&&null!==e}function y(e){return"string"==typeof e}function C(e){return e instanceof Array}function w(e){return e instanceof Node}function T(e){return w(e)?e.nodeType===Node.TEXT_NODE:k(e)?w(e[0]):!1}function k(e){return e instanceof jQuery}function E(e){return e instanceof Node||e instanceof NodeList||e instanceof HTMLCollection||e instanceof jQuery}function x(e,t){return E(e)||n("Parameter 1 to aButton is expected to be a jQuery compatible object",e),xo(e).button(t)}function S(e,t){return E(e)||n("Parameter 1 to aButtonSetLabel is expected to be a jQuery compatible object",e),xo(e).button("option","text",!0),xo(e).button("option","label",t)}function P(e,t){return E(e)||n("Parameter 1 to aButtonSetIcon is expected to be a jQuery compatible object",e),xo(e).button("option","icons",{primary:t})}function D(e){return E(e)||n("Parameter 1 to aButtonEnable is expected to be a jQuery compatible object",e),xo(e).button("option","disabled",!1)}function R(e){return!xo(e).is(".ui-state-disabled")}function A(e){return E(e)||n("Parameter 1 to aButtonDisable is expected to be a jQuery compatible object",e),xo(e).button("option","disabled",!0)}function B(e){return E(e)||n("Parameter 1 to aButtonActive is expected to be a jQuery compatible object",e),xo(e).addClass("ui-state-highlight")}function N(e){return E(e)||n("Parameter 1 to aButtonInactive is expected to be a jQuery compatible object",e),xo(e).removeClass("ui-state-highlight")}function I(e,t){return E(e)||n("Parameter 1 to aMenu is expected to be a jQuery compatible object",e),xo(e).menu(t)}function O(e,t){E(e)||n("Parameter 1 to aDialog is expected to be a jQuery compatible object",e),t.dialogClass="undefined"!=typeof t.dialogClass?t.dialogClass+" ui-dialog-fixed":"ui-dialog-fixed";var i=xo(e).dialog(t);return i.parent().css({top:(parseInt(i.parent().css("top"))||0)-xo(window).scrollTop()}),i.dialog("option","position","center"),i}function M(e){return E(e)||n("Parameter 1 to aDialogOpen is expected to be a jQuery compatible object",e),xo(e).dialog("open")}function L(e){return E(e)||n("Parameter 1 to aDialogClose is expected to be a jQuery compatible object",e),xo(e).dialog("close")}function H(e,t){return E(e)||n("Parameter 1 to aTabs is expected to be a jQuery compatible object",e),xo(e).tabs(t)}function j(e){"success"==e.type&&(e.state="confirmation"),xo.pnotify(xo.extend({type:"success",styling:"jqueryui",history:!1},e))}function U(e,i,n){return k(i)||t("Target must be a jQuery instance when previewing an action",i),F(e,i),e=en(i),n(),rangy.getSelection().removeAllRanges(),e}function F(e,t){if(e){var i=tn(t,e);return i.ranges&&rangy.getSelection().setRanges(i.ranges),i.element}return t}function q(e){e()}function z(){}function W(){}function Q(e,t){for(var i in t){var n=t[i],o=!1;do if(o=xo(e).find(i),o.length){o=xo(o.get(0));var a=xo(n).clone();a.html(o.html()),a.attr(dt(o)),o.replaceWith(a)}while(o.length)}}function G(e){xo(e).unwrap()}function V(e,t){if(!k(e))return n("Paramter 1 to cleanEmptyAttributes is expected a jQuery element"),void 0;for(i=0;i<t.length;i++)xo.trim(e.attr(t[i]))||e.removeAttr(t[i]),e.find("["+t[i]+"]").filter(function(){return""===xo.trim(xo(this).attr(t[i]))}).removeAttr(t[i])}function X(e){return k(e)?(e.contents().each(function(){this.nodeType==Node.COMMENT_NODE&&xo(this).remove()}),e.children().each(function(){X(xo(this))}),e):(n("Paramter 1 to cleanRemoveComments is expected a jQuery element"),void 0)}function _(e,t){if(!k(e))return n("Paramter 1 to cleanEmptyElements is expected a jQuery element"),void 0;var i;do i=!1,e.find(t.join(",")).each(function(){""===xo.trim(xo(this).html())&&(xo(this).remove(),i=!0)});while(i);return e}function K(e,t){if(!w(e))return n("Paramter 1 to cleanWrapTextNodes is expected a node."),void 0;for(var i=Qt(e),o=0,a=i.length;a>o;o++){var r=i[o].cloneNode(),s=document.createElement(t);s.appendChild(r),e.insertBefore(s,i[o]),e.removeChild(i[o])}}function J(e,t){var i;do i=!1,xo(e).find(t).each(function(){xo(this).parent().is(t)&&(xo(this).unwrap(),i=!0)});while(i)}function $(e){xo(e).find(".rangySelectionBoundary").remove()}function Y(e,t){var i,n=xo("<div>").addClass("spacer");"top"===t.position?(i={position:"fixed",top:t.under?xo(t.under).outerHeight():0,left:0,right:0},t.spacer&&(t.under?n.insertAfter(t.under):n.prependTo("body"))):"topLeft"===t.position?(i={position:"fixed",top:t.under?xo(t.under).outerHeight():0,left:0},t.spacer&&(t.under?n.insertAfter(t.under):n.prependTo("body"))):"topRight"===t.position?(i={position:"fixed",top:t.under?xo(t.under).outerHeight():0,right:0},t.spacer&&(t.under?n.insertAfter(t.under):n.prependTo("body"))):"bottom"===t.position?(i={position:"fixed",bottom:0,left:0,right:0},t.spacer&&n.appendTo("body")):"bottomLeft"===t.position?(i={position:"fixed",bottom:0,left:0},t.spacer&&n.appendTo("body")):"bottomRight"===t.position&&(i={position:"fixed",bottom:0,right:0},t.spacer&&n.appendTo("body"));var o=rn(e,i);return n.css("height",e.outerHeight()),setTimeout(function(){n.css("height",e.outerHeight())},300),{dockedElement:e,spacer:n,styleState:o}}function Z(e){return ln(e.dockedElement,e.styleState),e.spacer.remove(),e.dockedElement.detach()}function et(e,t,i){var n=t.wrap("<div>").parent(),o=sn(n,t,{"float":"none",display:"block",clear:"none",position:"static",margin:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,padding:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,outline:0,width:"auto",border:"none"}),a=rn(e,{position:"static"});return n.prepend(e).addClass(i.wrapperClass?i.wrapperClass:""),{dockedElement:e,dockedTo:t,innerStyleState:o,dockedElementStyleState:a}}function tt(e){ln(e.dockedTo,e.innerStyleState),ln(e.dockedElement,e.dockedElementStyleState);var t=e.dockedElement.detach();return e.dockedTo.unwrap(),t}function it(e,t){return e.children().each(function(){var e=xo.map(this.attributes,function(e){return-1===xo.inArray(e.name,t)?e.name:void 0}),i=xo(this);xo.each(e,function(e,t){i.removeAttr(t)}),element.removeAttributes(xo(this),t)}),e}function nt(e){var t=1;e.siblings().each(function(){var e=xo(this).css("z-index");!isNaN(e)&&e>t&&(t=e+1)}),e.css("z-index",t)}function ot(e){return e.clone().wrap("<div/>").parent().html()}function at(e){return e.clone().wrap("<div/>").parent().text()}function rt(e){return"block"===lt(e.tagName)}function st(e){var t=!1;return e.contents().each(function(){return!T(this)&&rt(this)?(t=!0,void 0):void 0}),t}function lt(e){var t,i=document.createElement(e),n="getComputedStyle"in window;return document.body.appendChild(i),t=(n?window.getComputedStyle(i,""):i.currentStyle).display,document.body.removeChild(i),t}function ct(e,t){return-1!==xo.inArray(xo(e)[0].tagName.toLowerCase(),t)}function ut(e,i,o){if(!w(e))return n("Parameter 1 to elementFirstInvalidElementOfValidParent must be a node",e),void 0;var a=e.parentNode;return a[0]===o[0]?ct(a,i)?e:(t("elementFirstInvalidElementOfValidParent requires a valid wrapper"),void 0):ct(a,i)?e:ut(a,i,o)}function pt(e){if(!E(e))return n("Parameter 1 to elementVisibleRect is expected to be a jQuery compatible object",e),void 0;e=xo(e);var t={top:Math.round(e.offset().top),left:Math.round(e.offset().left),width:Math.round(e.outerWidth()),height:Math.round(e.outerHeight())},i=xo(window).scrollTop(),o=xo(window).height(),a=i+o,r=Math.round(t.height+t.top);return i<t.top&&a>r?t:(i>t.top&&(t.top=i),t.height=r>a?a-t.top:o-(a-r),t)}function dt(e){for(var t=xo(e).get(0).attributes,i={},n=0,o=t.length;o>n;n++)i[t[n].name]=t[n].value;return i}function ht(e){for(var t={},i=window.getComputedStyle(e[0],null),n=0;n<i.length;n++)t[i.item(n)]=i.getPropertyValue(i.item(n));return t}function gt(e,t){var i=new jQuery;gi();for(var n=0,o=e.length;o>n;n++){var a=xo("<"+t+"/>").html(xo(e[n]).html());e.html(a),i.push(a[0])}return mi(),i}function mt(e,t){xo.each(t,function(t,i){xo(e).css(t)===i?xo(e).css(t,""):xo(e).css(t,i)})}function ft(e,t,i){for(var n in i)e.css(n,t.css(n)),t.css(n,i[n])}function bt(e){return k(e)?e.is("img")||e.find("img").length?!1:/&nbsp;/.test(e.html())?!1:""===e.text():(n("Parameter 1 to elementIsEmpty must be a jQuery element",e),void 0)}function vt(e,t){var i=xo(t).offset(),n=xo(t).outerHeight();xo(e).css({top:i.top+n-xo(window).scrollTop()+"px",left:i.left+"px"})}function yt(e,t){var i=xo(e).parent();xo(e).detach(),t(e),i.append(e)}function Ct(e,t){if(!k(e))return n("Parameter 1 to elementClosestBlock must be a jQuery element",e),void 0;if(!k(t))return n("Parameter 2 to elementClosestBlock must be a jQuery element",t),void 0;for(;e.length>0&&e[0]!==t[0]&&(e[0].nodeType===Node.TEXT_NODE||"inline"===e.css("display"));)e=e.parent();return e[0]===t[0]?null:e}function wt(){for(var e="ruid-"+(new Date).getTime()+"-"+Math.floor(1e5*Math.random());xo("#"+e).length;)e="ruid-"+(new Date).getTime()+"-"+Math.floor(1e5*Math.random());return e}function Tt(e,t){k(e)||n("Parameter 1 to elementChangeTag must be a jQuery element",e);for(var i=[],o=e.length-1;o>=0;o--){var a=document.createElement(t);a.innerHTML=e[o].innerHTML,xo.each(e[o].attributes,function(){xo(a).attr(this.name,this.value)}),xo(e[o]).after(a).remove(),i[o]=a}return xo(i)}function kt(e,t){if(e.outerHeight()>t.outerHeight()-20){var i=pt(t),n=t.offset();e.css({position:"absolute",top:n.top-e.outerHeight(),left:i.left+(i.width/2-e.outerWidth()/2)})}else{var i=pt(t);e.css({position:"absolute",top:i.top+(i.height/2-e.outerHeight()/2),left:i.left+(i.width/2-e.outerWidth()/2)})}}function Et(e,t){for(var i="",n=0,o=e.childNodes.length;o>n;n++){var a=e.childNodes.item(n),r=a.nodeType===Node.TEXT_NODE?a.nodeValue:ot(xo(a));r&&(i+=r)}return t&&(i=xo("<"+t+">"+i+"</"+t+">"),i.find("p").wrapInner("<"+t+"/>"),i.find("p > *").unwrap(),i=xo("<div/>").html(i).html()),i}function xt(e,t,i){for(var n=0,o=e.childNodes.length;o>n;n++){var a=e.childNodes.item(n),r=a.nodeType===Node.TEXT_NODE?a.nodeValue:xo(a).html();r&&xo("<"+i+"/>").html(xo.trim(r)).insertBefore(t)}}function St(e,t,i){return""!==i.html().trim()&&Hi()?Dt(e,t,i)?(console.log("listShouldConvertType"),Ft(e,t,i)):Pt(e,t)?(console.log("listShouldUnwrap"),Ut(e,t,i)):Rt(e,t,i)?(console.log("listShouldWrap"),Bt(e,t,i)):void 0:void 0}function Pt(e,t){var i=xo(Ri());return i.is(e)?!0:"blockquote"!==e||i.parent().is(e)?i.is(t)&&i.parent().is(e)?!0:i.parentsUntil(e,t).length?!0:!1:!1}function Dt(e,t,i){var n=ji(),o=xo(ii(n));if(ni(n)){var a=o.closest(t,i);a.length?$t(n,[a]):_t(n)}return o=xo(ii(n)),"blockquote"!==e||ai(n,o.get(0))?xo(o).is(t)&&!xo(o).parent().is(e)?!0:!1:!1}function Rt(e,t,i){return"blockquote"===e?ct(i,To):ct(i,wo)}function At(e,t,i,o){o="undefined"==typeof o?!0:o,k(e)||n("Parameter 1 for listEnforceValidChildren must be a jQuery element",e);var a=function(e){return xo(e).is("img")||xo(e).find("img").length?void 0:xo(e).text().trim()?void 0:(xo(e).remove(),!0)};e.find("> "+t).each(function(){return o&&a(this)?!0:(xo(this).contents().each(function(){if(o&&a(this))return!0;if("p"===t){if(!T(this)&&!ct(this,i))return xo(this).contents().unwrap(),!0}else{if(T(this))return!0;if(!ct(this,i))return xo(this).contents().unwrap(),a(this),!0}}),void 0)})}function Bt(e,t,i){{var n=ji();ii(n)}n.startContainer,n.endContainer;var o=n.extractContents(),a=Et(o),r=u("<"+e+">"+a+"</"+e+">"),s=xo(r);return s.children().wrap("<li>"),Ci(s),void 0;var o}function Nt(e,t){return e=xo("<div/>").html(e),st(e)?(e.contents().each(function(){return xo(this).is("img")?!0:bt(xo(this))?xo(this).remove():(xo(this).wrap("<"+t+"/>"),rt(this)||xo(this).wrap("<p>"),void 0)}),e.html()):"p"===t?"<"+t+">"+e.html()+"</"+t+">":"<"+t+"><p>"+e.html()+"</p></"+t+">"}function It(e,t,i){k(e)||n("Parameter 1 for listConvertListItem must be a jQuery element",e);var o=e.contents();return o.length?(o.each(function(){return""===xo(this).text().trim()?xo(this).remove():T(this)||!rt(this)?xo(this).wrap("<"+i+">"):void 0}),e.contents().unwrap()):Tt(e,i)}function Ot(e,t,i){return k(e)||n("Parameter 1 for listUnwrap must be a jQuery element",e),e.find(t).each(function(){It(xo(this),i,"p")}),e.contents().unwrap()}function Mt(e,t,i){k(e)||n("Parameter 1 for listTidyModified must be a jQuery element",e),Lt(e,t,i),Ht(e,t,i)}function Lt(e,t,i){k(e)||n("Parameter 1 for listRemoveEmptyItems must be a jQuery element",e),e.is(t)&&e.find(i).each(function(){""===xo(this).text().trim()&&xo(this).remove()})}function Ht(e,t){k(e)||n("Parameter 1 for listRemoveEmpty must be a jQuery element",e),e.is(t)&&""===e.text().trim()&&e.remove()}function jt(e,t,i,n){var o=ei(e),a=ti(e),r=wt();_t(e);var s="blockquote"===t?To:ko;s=xo.grep(s,function(e){return"li"!==e}),pi(e,xo("<p/>").attr("id",r),n,s);var l=xo("#"+r);Mt(l.prev(),t,i),Mt(l.next(),t,i);var c=[o];return o!==a&&(xo(o).nextUntil(a).each(function(){this!==a&&c.push(this)}),c.push(a)),c.reverse(),xo(c).each(function(){l.after(this),It(xo(this),t,"p")}),l.remove(),At(xo(ii(e)),i,Co)}function Ut(e,t,i){var n=ji();ni(n)&&$t(n,[t]);var o=xo(ii(n));if(o.is(e)){var a=ei(n),r=ti(n);return xo(r).is(e)&&xo(a).is(e)?Ot(o,t,e):jt(n,e,t,i)}return o.is(t)||(o=o.closest(t)),o.prev().length||o.next().length?o.next().length&&o.prev().length?jt(n,e,t,i):o.next().length&&!o.prev().length?(o.parent().before(It(o,e,"p")),o.remove(),void 0):!o.next().length&&o.prev().length?(o.parent().after(It(o,"p",e)),o.remove(),void 0):void 0:Ot(o.closest(e),t,e)}function Ft(e,t,i){var n=ji();ni(n)&&$t(n,[t]);var o=ei(n),a=ti(n),r=wt();_t(n);var s=xo.grep(ko,function(e){return e!==t});pi(n,xo("<p/>").attr("id",r),i,s);var l=xo("#"+r);Mt(l.prev(),e,t),Mt(l.next(),e,t);var c=[o];o!==a&&(xo(o).nextUntil(a).each(function(){this!==a&&c.push(this)}),c.push(a)),c.reverse(),xo(c).each(function(){l.after(this)}),l.remove();var u=xo(c).wrap("<"+e+">").parent();return At(u,t,Co)}function qt(e,t,i,n){var o=Di();if(!o.closest(t).length)return!1;var a=o.closest(e);if(!a.length||i.get(0)===a.get(0))return!1;Si(o),Zi();var r=xo("<"+e+"/>"),s=xo("<"+e+"/>"),l=!1;return a.children().each(function(){return o.closest(t).get(0)===this?(l=!0,r.append(this),void 0):(l?s.append(this):r.append(this),void 0)}),a.replaceWith(r),n=xo(n).appendTo(xo("body")),r.after(n,s),n}function zt(e,t){var i=Di();if(!i.closest(t).length)return!1;Zi(),Si(i);var n=Pi();""===n.trim()&&(n="&nbsp;"),Zi(),""===i.text().trim()&&i.html("&nbsp;");var o=xo("<"+t+">").html(n);return i.closest(t).after(o),At(i.closest(e),t,Co,!1),o}function Wt(e){for(;e.nodeType===Node.TEXT_NODE;)e=e.parentNode;return e}function Qt(e){for(var t=[],i=/^\s*$/,n=0,o=e.childNodes.length;o>n;n++)e.childNodes[n].nodeType==Node.TEXT_NODE&&(i.test(e.childNodes[n].nodeValue)||t.push(e.childNodes[n]));return t}function Gt(e,t){for(var i=e.parentNode;null!=i;){if(i==t)return!0;i=i.parentNode}return!1}function Vt(e,t){if(localStorage){var i;i=localStorage.raptor?JSON.parse(localStorage.raptor):{},i[e]=t,localStorage.raptor=JSON.stringify(i)}}function Xt(e){if(localStorage){var t;return t=localStorage.raptor?JSON.parse(localStorage.raptor):{},t[e]}}function _t(e){return Tn(e)?(e.setStartBefore(e.startContainer),e.setEndAfter(e.endContainer),void 0):(n("Parameter 1 to rangeExpandToParent is expected to be a range",e),void 0)}function Kt(e,t){return Tn(e)?k(t)?(e.selectNode(xo(t)[0]),void 0):(n("Parameter 2 to rangeSelectElement is expected to be a jQuery element",t),void 0):(n("Parameter 1 to rangeSelectElement is expected to be a range",e),void 0)}function Jt(e,t){return Tn(e)?k(t)||w(t)?(e.selectNodeContents(xo(t).get(0)),void 0):(n("Parameter 2 to rangeSelectElementContent is expected to be a jQuery element or node",t),void 0):(n("Parameter 1 to rangeSelectElementContent is expected to be a range",e),void 0)}function $t(e,t){if(!Tn(e))return n("Parameter 1 to rangeReplace is expected to be a range",e),void 0;if(!C(t))return n("Parameter 2 to rangeExpandTo is expected to be an array",t),void 0;do{_t(e);for(var i=0,o=t.length;o>i;i++)if(xo(e.commonAncestorContainer).is(t[i]))return}while(e.commonAncestorContainer)}function Yt(e,t){if(!Tn(e))return n("Parameter 1 to rangeReplace is expected to be a range",e),void 0;if(!k(t)&&!y(t))return n("Parameter 2 to rangeReplace is expected to be a string or jQuery element",t),void 0;var i=[],o=xo("<div/>").append(t)[0].childNodes;return e.deleteContents(),void 0===o.length||1===o.length?e.insertNode(o[0].cloneNode(!0)):xo.each(o,function(t,n){i.unshift(n.cloneNode(!0)),e.insertNodeAtEnd(i[0])}),i}function Zt(e){var t=di(e);return"string"==typeof t&&(t=t.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1")),an(t)}function ei(e){return Tn(e)||n("Parameter 1 to rangeGetStartElement is expected to be a range",e),Wt(e.startContainer)}function ti(e){return Tn(e)||n("Parameter 1 to rangeGetEndElement is expected to be a range",e),Wt(e.endContainer)}function ii(e){return Tn(e)||n("Parameter 1 to rangeGetCommonAncestor is expected to be a range",e),Wt(e.commonAncestorContainer)}function ni(e){return Tn(e)||n("Parameter 1 to rangeGetCommonAncestor is expected to be a range",e),e.startOffset===e.endOffset&&e.startContainer===e.endContainer}function oi(e,t){Tn(e)||n("Parameter 1 to rangeIsContainedBy is expected to be a range",e),w(t)||n("Parameter 1 to rangeIsContainedBy is expected to be a node",t);var i=e.cloneRange();return i.selectNodeContents(t),i.containsRange(e)}function ai(e,t){return Tn(e)||n("Parameter 1 to rangeContainsNode is expected to be a range",e),w(t)||n("Parameter 1 to rangeContainsNode is expected to be a node",t),e.containsNode(t)}function ri(e,t){return Tn(e)||n("Parameter 1 to rangeContainsText is expected to be a range",e),w(t)||n("Parameter 1 to rangeContainsText is expected to be a node",t),e.containsNodeText(t)}function si(e){if(Tn(e)||n("Parameter 1 to rangeTrim is expected to be a range",e),e.startContainer.data)for(;/\s/.test(e.startContainer.data.substr(e.startOffset,1));)e.setStart(e.startContainer,e.startOffset+1);if(e.endContainer.data)for(;e.endOffset>0&&/\s/.test(e.endContainer.data.substr(e.endOffset-1,1));)e.setEnd(e.endContainer,e.endOffset-1)}function li(e,t){return Tn(e)||n("Parameter 1 to rangeSerialize is expected to be an range",e),w(t)||n("Parameter 1 to rangeSerialize is expected to be a node",t),rangy.serializeRange(e,!0,t)}function ci(e,t){y(e)||n("Parameter 1 to rangeDeserialize is expected to be a string",e);for(var i=e.split("|"),o=[],a=0,r=i.length;r>a;a++)o[a]=rangy.deserializeRange(i[a],t);return o}function ui(e,t,i,o){Tn(e)||n("Parameter 1 to rangeReplaceSplitInvalidTags is expected to be a range",e);var a=ii(e);ct(a,o)||(a=ut(a,o,i));var r=rangy.createRange();r.setStartBefore(a),r.setEnd(e.startContainer,e.startOffset);var s=r.cloneContents(),l=rangy.createRange();l.setStart(e.endContainer,e.endOffset),l.setEndAfter(a);var c=l.cloneContents(),u=ot(xo(Et(s)));return u+=ot(xo(t).attr("data-replacement",!0)),u+=ot(xo(Et(c))),u=xo(u),xo(a).replaceWith(u),u=u.parent().find("[data-replacement]").removeAttr("data-replacement"),u.prev().is(a.tagName.toLowerCase())&&!u.prev().html().trim()&&u.prev().remove(),u.next().is(a.tagName.toLowerCase())&&!u.next().html().trim()&&u.next().remove(),u}function pi(e,t,i,n){var o=Wt(e.startContainer),a=Wt(e.endContainer),r=ii(e),s=ct(r,n),l=ct(o,n),c=ct(a,n);return s&&l&&c?Yt(e,t):ui(e,t,i,n)}function di(e){return Et(e.cloneContents())}function hi(){var e=rangy.getSelection();return e.rangeCount>0?e.getRangeAt(0):null}function gi(e){(!Eo||e)&&(Eo=rangy.saveSelection())}function mi(){Eo&&(rangy.restoreSelection(Eo),Eo=!1)}function fi(){Eo&&rangy.removeMarkers(Eo),Eo=!1}function bi(){return Eo!==!1}function vi(e,t,i){t=t||rangy.getSelection();for(var n,o=0;n=t.getAllRanges()[o++];)e.call(i,n)}function yi(e){rangy.getSelection().setSingleRange(e)}function Ci(e,t){var i=[];return vi(function(t){i=i.concat(Yt(t,e))},t,this),i}function wi(e,t){if(!w(e))return n("Parameter 1 to selectionSelectInner is expected a Node",e),void 0;t=t||rangy.getSelection();var i=rangy.createRange();i.selectNodeContents(e),t.setSingleRange(i)}function Ti(e){if(!w(e))return n("Parameter 1 to selectionSelectOuter must be a node",e),void 0;var t=rangy.createRange();t.selectNode(e),rangy.getSelection().setSingleRange(t)}function ki(e,t,i){t=t||rangy.getSelection(),t.removeAllRanges(),xo(e).each(function(){var e=rangy.createRange();e.selectNodeContents(this),e.collapse(i),t.addRange(e)})}function Ei(e,t){ki(e,t,!1)}function xi(e,t){ki(e,t,!0)}function Si(e,t){if(!k(e))return n("Parameter 1 to selectionSelectToEndOfElement is expected to be Element",e),void 0;t=t||rangy.getSelection();var i=ji();t.removeAllRanges(),i.setEndAfter(e.get(0)),t.addRange(i)}function Pi(e){return e=e||rangy.getSelection(),e.toHtml()}function Di(e,t){if(t=t||rangy.getSelection(),!Hi())return new jQuery;var i,e=ji();return i=e.commonAncestorContainer.nodeType===Node.TEXT_NODE?e.commonAncestorContainer.parentNode:e.commonAncestorContainer,xo(i)}function Ri(e){var t=new jQuery;return vi(function(e){t.push(Di(e)[0])},e,this),t}function Ai(){var e=rangy.getSelection();return null===e.anchorNode?null:e.isBackwards()?e.focusNode.nodeType===Node.TEXT_NODE?xo(e.focusNode.parentElement):xo(e.focusNode):(e.anchorNode||console.trace(),e.anchorNode.nodeType===Node.TEXT_NODE?xo(e.anchorNode.parentElement):xo(e.anchorNode))}function Bi(){var e=rangy.getSelection();return null===e.anchorNode?null:e.isBackwards()?e.anchorNode.nodeType===Node.TEXT_NODE?xo(e.anchorNode.parentElement):xo(e.anchorNode):e.focusNode.nodeType===Node.TEXT_NODE?xo(e.focusNode.parentElement):xo(e.focusNode)}function Ni(){var e=rangy.getSelection(),t=e.isBackwards()?e.anchorNode:e.focusNode,i=e.isBackwards()?e.focusOffset:e.anchorOffset;if(i!==t.textContent.length)return!1;var n=t.nextSibling;return n&&""!==xo(n).html()?!1:!0}function Ii(){var e=rangy.getSelection(),t=e.isBackwards()?e.focusNode:e.anchorNode;if(e.isBackwards()?e.focusOffset:0!==e.anchorOffset)return!1;var i=t.previousSibling;return i&&""!==xo(i).html()?!1:!0}function Oi(){return""===rangy.getSelection().toHtml()}function Mi(e,t){t=t||{};var i=rangy.createCssClassApplier(t.classes||"",{normalize:!0,elementTagName:e,elementProperties:t.attributes||{}});vi(function(n){if(Zt(n)){var o=xo("<"+e+"/>").addClass(t.classes).attr(t.attributes||{}).append(Et(n.cloneContents()));Yt(n,o)}else i.toggleRange(n)},null,this)}function Li(e,t,i){vi(function(n){var o=Di(n);o.is(e)?o.attr(t):Mi(e,{classes:i,attributes:t})},null,this)}function Hi(){return 0!==rangy.getSelection().rangeCount}function ji(){return Hi()||t("Tried to get selection range when there is no selection"),rangy.getSelection().getRangeAt(0)}function Ui(e,t){t=t||rangy.getSelection();var i=i(),n=Ri()[0],o=rangy.createRange();o.setStartBefore(n),o.setEnd(i.startContainer,i.startOffset);var a=o.cloneContents(),r=rangy.createRange();r.setStart(i.endContainer,i.endOffset),r.setEndAfter(n);var s=r.cloneContents(),l=ot(xo(Et(a)));return l+=ot(xo(e).attr("data-replacement",!0)),l+=ot(xo(Et(s))),l=xo(l),xo(n).replaceWith(l),l.parent().find("[data-replacement]").removeAttr("data-replacement")}function Fi(e,t,i){if(i=i||rangy.getSelection(),Hi()){var n=Ai()[0],o=Bi()[0],a=Ri()[0],r=ct(a,t),s=ct(n,t),l=ct(o,t);return r&&s&&l?Ci(e):Ui(e,i)}}function qi(e,t){vi(function(i){for(var n=xo(i.commonAncestorContainer);n.length&&n[0]!==t[0]&&(n[0].nodeType===Node.TEXT_NODE||"inline"===n.css("display"));)n=n.parent();n[0]===t[0]&&"inline"!==t.css("display")&&(gt(t,"div"),n=t.children().first()),mt(n,e)},null,this)}function zi(e,t,i){return xo.isFunction(e)?t instanceof jQuery?"undefined"!=typeof i&&"string"!=typeof i?(n("Paramter 3 to selectionEachBlock is expected be undefined or a string",i),void 0):(vi(function(n){var o,a=Ct(xo(n.startContainer),t),r=Ct(xo(n.endContainer),t);if(a&&r){a.is(r)?o=a:a&&r&&(o=a.nextUntil(r).andSelf().add(r));for(var s=0,l=o.length;l>s;s++)e(o[s])}else e(gt(t,i).get(0))}),void 0):(n("Paramter 2 to selectionEachBlock is expected a jQuery element",t),void 0):(n("Paramter 1 to selectionEachBlock is expected to be a function",e),void 0)}function Wi(e,t,i,o){if(!xo.isArray(e))return n("Paramter 1 to selectionToggleBlockClasses is expected to be an array of classes",e),void 0;if(!xo.isArray(t))return n("Paramter 2 to selectionToggleBlockClasses is expected to be an array of classes",t),void 0;if(!(i instanceof jQuery))return n("Paramter 3 to selectionToggleBlockClasses is expected a jQuery element",i),void 0;if("undefined"!=typeof o&&"string"!=typeof o)return n("Paramter 4 to selectionToggleBlockClasses is expected be undefined or a string",o),void 0;var a=!1,r=new jQuery;zi(function(t){if(r.push(t),!a)for(var i=0,n=e.length;n>i;i++)xo(t).hasClass(e[i])||(a=!0)},i,o),xo(r).removeClass(t.join(" ")),a?xo(r).addClass(e.join(" ")):xo(r).removeClass(e.join(" "))}function Qi(e,t){if(!w(e))return n("Parameter 1 to selectionConstrain must be a node",e),void 0;t=t||rangy.getSelection();for(var i=t.getAllRanges(),o=[],a=0,r=i.length;r>a;a++){var s=i[a].cloneRange();i[a].startContainer===e||Gt(i[a].startContainer,e)||s.setStart(e,0),i[a].endContainer===e||Gt(i[a].endContainer,e)||s.setEnd(e,e.childNodes.length),o.push(s)}t.setRanges(o)}function Gi(e,t){if(e&&!w(e))return n("Parameter 1 to selectionClearFormatting must be a node",e),void 0;if(e=e||document.body,t=t||rangy.getSelection(),Hi()){var i=ji().cloneRange(),o=i.extractContents();""===Et(o)&&(Jt(i,i.commonAncestorContainer),t.setSingleRange(i),o=i.extractContents()),o=xo("<div/>").append(Et(o)).html().replace(/(<\/?.*?>)/gi,function(e){return null!==e.match(/^<(img|object|param|embed|iframe)/)?e:""});for(var a=i.commonAncestorContainer;a&&a.parentNode!==e;)a=a.parentNode;if(a){i.setEndAfter(a);var r=i.extractContents();i.collapseAfter(a),i.insertNode(r),i.collapseAfter(a)}o=xo.parseHTML(o),null!==o&&xo(o.reverse()).each(function(){return xo(this).is("img")?(i.insertNode(xo(this).removeAttr("width height class style").get(0)),void 0):(i.insertNode(this),void 0)})}}function Vi(e,t,i,n){gi();var o="domTools"+Math.ceil(1e7*Math.random());vi(function(e){var a=rangy.createCssClassApplier(n,{elementTagName:i});a.isAppliedToRange(e)?a.toggleSelection():rangy.createCssClassApplier(t,{elementTagName:o}).toggleSelection()},null,this),xo(o).each(function(){xo(this).replaceWith(xo("<"+e+"/>").addClass(t).html(xo(this).html()))}),mi()}function Xi(){var e=rangy.getSelection().getAllRanges();1===e.length&&""===di(e[0])&&rangy.getSelection().expand("word")}function _i(e,t,i){for(var n=rangy.getSelection().getAllRanges(),o=0,a=n.length;a>o;o++){var r=xo(Wt(n[o].startContainer));(i||!r.is(e)&&!r.is(t))&&(r=r.parentsUntil(t,e)),r=i?r.last():r.first(),1!==r.length||r.is(t)||n[o].setStart(r[0],0),r=xo(Wt(n[o].endContainer)),(i||!r.is(e)&&!r.is(t))&&(r=r.parentsUntil(t,e)),r=i?r.last():r.first(),1!==r.length||r.is(t)||n[o].setEnd(r[0],r[0].childNodes.length)}rangy.getSelection().setRanges(n)}function Ki(){if(Hi()){var e=ji();si(e),yi(e)}}function Ji(e,t){var i=new jQuery;return vi(function(n){for(var o=n.startContainer;o.nodeType===Node.TEXT_NODE;)o=o.parentNode;for(var a=n.endContainer;a.nodeType===Node.TEXT_NODE;)a=a.parentNode;var r=function(){t.is(this)||i.push(this)};do{if(xo(o).filter(e).each(r),t.is(o)||0!==i.length||xo(o).parentsUntil(t,e).each(r),xo(o).find(e).each(r),xo(a).is(o))break;o=xo(o).next()}while(o.length>0&&0===xo(o).prevAll().has(a).length)}),i}function $i(e,t,i){var n=Ji(t.join(","),i);if(n.length)gi(),Tt(n,e),mi();else{var o=i.get(0);o.innerHTML.trim()?(gi(),o.innerHTML="<"+e+">"+o.innerHTML+"</"+e+">",mi()):(o.innerHTML="<"+e+">&nbsp;</"+e+">",wi(o.childNodes[0]))}}function Yi(e,t){var i=!0;return vi(function(n){var o=xo(n.commonAncestorContainer).find("*");0!==xo(n.commonAncestorContainer).parentsUntil(t,e).length||0!==o.length&&o.length===o.filter(e).length||(i=!1)}),i}function Zi(e){e=e||rangy.getSelection(),e.deleteFromDocument()}function en(e){e instanceof xo||t("Element must be a jQuery instance when saving a state",e);var i=hi();return{element:e.clone(!0),ranges:i?li(i,e.get(0)):null}}function tn(e,i){e instanceof xo||t("Element must be a jQuery instance when restoring a state",e),i.element instanceof xo||t("Preview state element must be a jQuery instance when restoring a state",i.element),e.replaceWith(i.element);var n=null;try{i.ranges&&(n=ci(i.ranges,i.element.get(0)))}catch(o){t(o)}return{element:i.element,ranges:n}}function nn(e,t){allowed=[];for(var i=0;i<t.length;i++)t[i].match(/[a-z][a-z0-9]{0,}/g)&&allowed.push(t[i]);var n=/<\/?([a-z][a-z0-9]*)\b[^>]*\/?>/gi,o=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(o,"").replace(n,function(e,t){return allowed.indexOf(t.toLowerCase())>-1?e:""})}function on(e,t){return e.replace(/([A-Z])/g,function(e){return(t||"-")+e.toLowerCase()})}function an(e){return y(e)?xo(xo.parseHTML(e)).is(":empty"):(n("Parameter 1 to stringHtmlStringIsEmpty must be a string",e),void 0)}function rn(e,t){var i=e.get(0),n={};for(var o in t)n[o]=i.style[o];for(o in t)e.css(o,t[o]);return n}function sn(e,t,i){var n=t.get(0),o={};for(var a in i)o[a]=n.style[a];for(a in i)e.css(a,t.css(a)),t.css(a,i[a]);return o}function ln(e,t){for(var i in t)e.css(i,t[i]||"")}function cn(e,t,i){i=i||{};for(var n=document.createElement("table");t--;)for(var o=n.insertRow(0),a=0;e>a;a++){var r=o.insertCell(0);i.placeHolder&&(r.innerHTML=i.placeHolder)}return n}function un(e,t,i){return resizeTable(e,0,0,1,t,i||{})}function pn(e,t){resizeTable(e,0,0,-1,t)}function dn(e,t,i){var n=new GoogTable(e);return n.insertRow(t,i)}function hn(e,t){resizeTable(e,-1,t,0,0)
}function gn(e){for(var t,i,n,o,a=[],r=e.parentNode.parentNode.parentNode.tBodies[0].rows,s=0;s<r.length;s++){i=r[s].sectionRowIndex,i=s;for(var l=0;l<r[s].cells.length;l++){for(t=l;a[i]&&a[i][t];)t++;for(n=t;n<t+(r[s].cells[l].colSpan||1);++n)for(o=i;o<i+(r[s].cells[l].rowSpan||1);++o)a[o]||(a[o]=[]),a[o][n]=!0;if(e===r[s].cells[l])return{x:t,y:i}}}}function mn(e,t){for(var i=e.tBodies[0].rows,n=0;n<i.length;n++)for(var o=0;o<i[n].cells.length;o++){var a=gn(i[n].cells[o]);if(a.x===t.x&&a.y===t.y)return i[n].cells[o]}return null}function fn(e,t,i){for(var n=Math.min(t.x,i.x),o=n,a=Math.min(t.y,i.y),r=Math.max(t.x,i.x),s=Math.max(t.y,i.y),l=[];s>=a;){for(;r>=o;){var c=mn(e,{x:o,y:a});null!==c&&l.push(c),o++}o=n,a++}return l}function bn(){}function vn(e,t,i,n,o){var a=new GoogTable(e);a.mergeCells(t,i,n,o)}function yn(){}function Cn(e,t,i){var n=new GoogTable(e);n.splitCell(t,i)}function wn(e){for(var t=0,i=e.rows.length;i>t;t++)if(e.rows[t].cells.length>0)return!1;return!0}function Tn(e){return e instanceof rangy.WrappedRange}function kn(e){return e instanceof rangy.WrappedSelection}function En(){if(void 0===So){So=!0,Po=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent),Po&&(xo("html").addClass("raptor-ios"),Po&&xo(document).on("scroll",function(){setInterval(function(){xo("body").css("height","+=1").css("height","-=1")},0)})),Ro=/Firefox/i.test(navigator.userAgent),Ro&&xo("html").addClass("raptor-ff");var e=function(){var e=-1;return-1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),e}();Ao=-1!==e,Ao&&9>e&&(So=!1,xo(function(){var e=xo("<div/>").addClass("raptor-unsupported").html('<div class="raptor-unsupported-overlay"></div><div class="raptor-unsupported-content">    It has been detected that you a using a browser that is not supported by Raptor, please    use one of the following browsers:    <ul>        <li><a href="http://www.google.com/chrome">Google Chrome</a></li>        <li><a href="http://www.firefox.com">Mozilla Firefox</a></li>        <li><a href="http://windows.microsoft.com/ie">Internet Explorer</a></li>    </ul>    <div class="raptor-unsupported-input">        <button class="raptor-unsupported-close">Close</button>        <input name="raptor-unsupported-show" type="checkbox" />        <label>Don\'t show this message again</label>    </div><div>').appendTo("body"),t=function(e){var t=1;e.siblings().each(function(){var e=xo(this).css("z-index");!isNaN(e)&&e>t&&(t=e+1)}),e.css("z-index",t)};t(e),e.find(".raptor-unsupported-close").click(function(){e.remove()})})),Do=void 0!==jQuery.hotkeys}return So}function xn(e,t){for(var i=e.split("."),n=t.split("."),o=0;o<i.length;++o){if(n.length==o)return e;var a=parseInt(i[o]),r=parseInt(n[o]);if(a!=r)return a>r?e:t}return i.length!=n.length?t:null}function Sn(e){this.name=e}function Pn(e,t){this.name=e;for(var i in t)this[i]=t[i]}function Dn(e,t){this.raptor=e,this.uiOrder=t}function Rn(){Sn.call(this,"toolbar"),this.wrapper=null}function An(){Sn.call(this,"hoverPanel"),this.hoverPanel=null,this.visible=!1}function Bn(){Sn.call(this,"elementHoverPanel"),this.elements="img",this.hoverPanel=null,this.visible=!1,this.target=null,this.enabled=!0}function Nn(e){this.text=!1,this.label=null,this.icon=null,this.hotkey=null;for(var t in e)this[t]=e[t]}function In(e){this.preview=!0,this.previewing=!1,Nn.call(this,e)}function On(e){this.disable=!1,Nn.call(this,e)}function Mn(e){In.call(this,e)}function Ln(e){Nn.call(this,e)}function Hn(e){Mn.call(this,e)}function jn(e){this.state=null,Nn.call(this,e)}function Un(e){jn.call(this,e),On.call(this,e)}function Fn(e,t){this.menu=e,this.name=e.name,this.raptor=e.raptor,this.options=e.options,Nn.call(this,t)}function qn(e){this.menu=null,this.menuContent="",this.button=null;for(var t in e)this[t]=e[t]}function zn(e){qn.call(this,e)}function Wn(){zn.call(this,{name:"classMenu"})}function Qn(){this.colors=["white","black","grey","blue","red","green","purple","orange"],this.currentColor="automatic",zn.call(this,{name:"colorMenuBasic"})}function Gn(e,t){this.options={dockToElement:!1,docked:!1,position:"top",spacer:!0,persist:!0},this.dockState=!1,this.marker=!1,Pn.call(this,e||"dock",t)}function Vn(e){this.raptor=e,this.label=l("linkTypeDocumentLabel")}function Xn(e){this.raptor=e,this.label=l("linkTypeEmailLabel")}function _n(e){this.raptor=e,this.label=l("linkTypeExternalLabel")}function Kn(e){this.raptor=e,this.label=l("linkTypeInternalLabel")}function Jn(e,t){Pn.call(this,e||"noBreak",t)}function $n(e,t){Pn.call(this,e||"normaliseLineBreaks",t)}function Yn(e,t){this.options={allowedTags:["h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","p","a","span","hr","br","strong","em"],allowedAttributes:["href","title"],allowedEmptyTags:["hr","br"],panels:["formatted-clean","plain-text","formatted-unclean","source"]},Pn.call(this,e||"paste",t)}function Zn(e,t){this.options={content:l("placeholderPluginDefaultContent"),tag:"p",select:!0},Pn.call(this,e||"placeholder",t)}function eo(){zn.call(this,{name:"snippetMenu"})}function to(e){Ln.call(this,e)}function io(){qn.call(this,{name:"tableCreate"})}function no(e,t){Pn.call(this,e||"tableSupport",t)}function oo(){zn.call(this,{name:"tagMenu"})}function ao(e){Mn.call(this,e)}function ro(e,t){Pn.call(this,e||"toolTip",t)}function so(e,t){Pn.call(this,e||"unsavedEditWarning",t)}var lo={};lo.x=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return new XMLHttpRequest}}},lo.prepare=function(e){var t=[];for(var i in e)t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t.join("&")},lo.send=function(e,t,i,n,o){var a=lo.x();a.open(i,e,o),a.onreadystatechange=function(){4==a.readyState&&t(a.responseText,a)},a.setRequestHeader("X-Requested-With","XMLHttpRequest"),"POST"==i&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(n)},lo.get=function(e,t,i,n){lo.send(e+(t?"?"+lo.prepare(t):""),i,"GET",null,n)},lo.post=function(e,t,i,n){var o=[];for(var a in t)o.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));lo.send(e,i,"POST",lo.prepare(t),n)};var co=100,uo=500,po=1e3,ho="undefined"!=typeof window.debugLevel?window.debugLevel:co,go=null,mo="en",fo={},bo={};d.prototype.init=function(){};var vo={};jQuery(window).on("beforeunload",h);var yo={unsupported:'<div class="{{baseClass}}-unsupported-overlay"></div> <div class="{{baseClass}}-unsupported-content"> It has been detected that you a using a browser that is not supported by Raptor, please use one of the following browsers: <ul> <li><a href="http://www.google.com/chrome">Google Chrome</a></li> <li><a href="http://www.firefox.com">Mozilla Firefox</a></li> <li><a href="http://www.google.com/chromeframe">Internet Explorer with Chrome Frame</a></li> </ul> <div class="{{baseClass}}-unsupported-input"> <button class="{{baseClass}}-unsupported-close">Close</button> <input name="{{baseClass}}-unsupported-show" type="checkbox" /> <label>Don\'t show this message again</label> </div> <div>',"class-menu.item":'<li><a data-value="{{value}}">{{label}}</a></li>',"click-button-to-edit.button":"<button class=\"{{baseClass}}-button\">tr('clickButtonToEditPluginButton')</button>","color-menu-basic.menu":'<li><a data-color="automatic"><div class="{{baseClass}}-swatch" style="display: none"></div> <span>tr(\'colorMenuBasicAutomatic\')</span></a></li> <li><a data-color="white"><div class="{{baseClass}}-swatch" style="background-color: #ffffff"></div> <span>tr(\'colorMenuBasicWhite\')</span></a></li> <li><a data-color="black"><div class="{{baseClass}}-swatch" style="background-color: #000000"></div> <span>tr(\'colorMenuBasicBlack\')</span></a></li> <li><a data-color="grey"><div class="{{baseClass}}-swatch" style="background-color: #999"></div> <span>tr(\'colorMenuBasicGrey\')</span></a></li> <li><a data-color="blue"><div class="{{baseClass}}-swatch" style="background-color: #4f81bd"></div> <span>tr(\'colorMenuBasicBlue\')</span></a></li> <li><a data-color="red"><div class="{{baseClass}}-swatch" style="background-color: #c0504d"></div> <span>tr(\'colorMenuBasicRed\')</span></a></li> <li><a data-color="green"><div class="{{baseClass}}-swatch" style="background-color: #9bbb59"></div> <span>tr(\'colorMenuBasicGreen\')</span></a></li> <li><a data-color="purple"><div class="{{baseClass}}-swatch" style="background-color: #8064a2"></div> <span>tr(\'colorMenuBasicPurple\')</span></a></li> <li><a data-color="orange"><div class="{{baseClass}}-swatch" style="background-color: #f79646"></div> <span>tr(\'colorMenuBasicOrange\')</span></a></li>',"embed.dialog":'<div class="{{baseClass}}-panel-tabs ui-tabs ui-widget ui-widget-content ui-corner-all"> <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"> <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a>tr(\'embedDialogTabCode\')</a></li> <li class="ui-state-default ui-corner-top"><a>tr(\'embedDialogTabPreview\')</a></li> </ul> <div class="{{baseClass}}-code-tab"> <p>tr(\'embedDialogTabCodeContent\')</p> <textarea></textarea> </div> <div class="{{baseClass}}-preview-tab" style="display: none"> <p>tr(\'embedDialogTabPreviewContent\')</p> <div class="{{baseClass}}-preview"></div> </div> </div>',"image-resize.dialog":'<div class="raptor-resize-image"> <div> <label for="{{baseClass}}-width">tr(\'imageResizeDialogWidth\')</label> <input class="form-text" id="{{baseClass}}-width" name="width" type="text" placeholder="tr(\'imageResizeDialogWidthPlaceHolder\')"/> </div> <div> <label for="{{baseClass}}-height">tr(\'imageResizeDialogHeight\')</label> <input class="form-text" id="{{baseClass}}-height" name="height" type="text" placeholder="tr(\'imageResizeDialogHeightPlaceHolder\')"/> </div> <div class="{{baseClass}}-lock-proportions-container"> <span class="{{baseClass}}-lock-proportions"> <span class="ui-button-text">Constrain proportions</span> <span class="ui-icon ui-icon-locked"></span> </span> </div> </div>',"insert-file.dialog":'<div> <div> <label class="form-label">tr(\'insertFileURLLabel\')</label> <input type="text" name="location" class="form-text" placeholder="tr(\'insertFileURLPlaceHolder\')"/> </div> <div> <label class="form-label">tr(\'insertFileNameLabel\')</label> <input type="text" name="name" class="form-text" placeholder="tr(\'insertFileNamePlaceHolder\')"/> </div> </div>',"link.dialog":'<div style="display:none" class="{{baseClass}}-panel"> <div class="{{baseClass}}-menu"> <p>tr(\'linkCreateDialogMenuHeader\')</p> <fieldset data-menu=""></fieldset> </div> <div class="{{baseClass}}-wrap"> <div class="{{baseClass}}-content" data-content=""></div> </div> </div>',"link.document":'<h2>tr(\'linkTypeDocumentHeader\')</h2> <fieldset> <label for="{{baseClass}}-document-href">tr(\'linkTypeDocumentLocationLabel\')</label> <input id="{{baseClass}}-document-href" value="http://" name="location" class="{{baseClass}}-document-href" type="text" placeholder="tr(\'linkTypeDocumentLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeDocumentNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-document-target"> <input id="{{baseClass}}-document-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeDocumentNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeDocumentInfo\')',"link.email":'<h2>tr(\'linkTypeEmailHeader\')</h2> <fieldset class="{{baseClass}}-email"> <label for="{{baseClass}}-email">tr(\'linkTypeEmailToLabel\')</label> <input id="{{baseClass}}-email" name="email" type="text" placeholder="tr(\'linkTypeEmailToPlaceHolder\')"/> </fieldset> <fieldset class="{{baseClass}}-email"> <label for="{{baseClass}}-email-subject">tr(\'linkTypeEmailSubjectLabel\')</label> <input id="{{baseClass}}-email-subject" name="subject" type="text" placeholder="tr(\'linkTypeEmailSubjectPlaceHolder\')"/> </fieldset>',"link.error":'<div style="display:none" class="ui-widget {{baseClass}}-error-message {{messageClass}}"> <div class="ui-state-error ui-corner-all"> <p> <span class="ui-icon ui-icon-alert"></span> {{message}} </p> </div> </div>',"link.external":'<h2>tr(\'linkTypeExternalHeader\')</h2> <fieldset> <label for="{{baseClass}}-external-href">tr(\'linkTypeExternalLocationLabel\')</label> <input id="{{baseClass}}-external-href" value="http://" name="location" class="{{baseClass}}-external-href" type="text" placeholder="tr(\'linkTypeExternalLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeExternalNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-external-target"> <input id="{{baseClass}}-external-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeExternalNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeExternalInfo\')',"link.file-url":'<h2>tr(\'Link to a document or other file\')</h2> <fieldset> <label for="{{baseClass}}-external-href">tr(\'Location\')</label> <input id="{{baseClass}}-external-href" value="http://" name="location" class="{{baseClass}}-external-href" type="text" placeholder="tr(\'Enter your URL\')" /> </fieldset> <h2>tr(\'New window\')</h2> <fieldset> <label for="{{baseClass}}-external-target"> <input id="{{baseClass}}-external-target" name="blank" type="checkbox" /> <span>tr(\'Check this box to have the file open in a new browser window\')</span> </label> </fieldset> <h2>tr(\'Not sure what to put in the box above?\')</h2> <ol> <li>tr(\'Ensure the file has been uploaded to your website\')</li> <li>tr(\'Open the uploaded file in your browser\')</li> <li>tr("Copy the file\'s URL from your browser\'s address bar and paste it into the box above")</li> </ol>',"link.internal":'<h2>tr(\'linkTypeInternalHeader\')</h2> <fieldset> <label for="{{baseClass}}-internal-href">tr(\'linkTypeInternalLocationLabel\') {{domain}}</label> <input id="{{baseClass}}-internal-href" value="" name="location" class="{{baseClass}}-internal-href" type="text" placeholder="tr(\'linkTypeInternalLocationPlaceHolder\')" /> </fieldset> <h2>tr(\'linkTypeInternalNewWindowHeader\')</h2> <fieldset> <label for="{{baseClass}}-internal-target"> <input id="{{baseClass}}-internal-target" name="blank" type="checkbox" /> <span>tr(\'linkTypeInternalNewWindowLabel\')</span> </label> </fieldset> tr(\'linkTypeInternalInfo\')',"link.label":'<label> <input type="radio" name="link-type" autocomplete="off"/> <span>{{label}}</span> </label>',"paste.dialog":'<div class="{{baseClass}}-panel ui-dialog-content ui-widget-content"> <div class="{{baseClass}}-panel-tabs ui-tabs ui-widget ui-widget-content ui-corner-all"> <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"> <li class="{{baseClass}}-tab-formatted-clean ui-state-default ui-corner-top ui-state-active ui-tabs-selected" style="display: none"><a>tr(\'pasteDialogFormattedCleaned\')</a></li> <li class="{{baseClass}}-tab-plain-text ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogPlain\')</a></li> <li class="{{baseClass}}-tab-formatted-unclean ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogFormattedUnclean\')</a></li> <li class="{{baseClass}}-tab-source ui-state-default ui-corner-top" style="display: none"><a>tr(\'pasteDialogSource\')</a></li> </ul> <div class="{{baseClass}}-content-formatted-clean" style="display: none"> <div contenteditable="true" class="{{baseClass}}-area {{baseClass}}-markup"></div> </div> <div class="{{baseClass}}-content-plain-text" style="display: none"> <textarea class="{{baseClass}}-area {{baseClass}}-plain"></textarea> </div> <div class="{{baseClass}}-content-formatted-unclean" style="display: none"> <div contenteditable="true" class="{{baseClass}}-area {{baseClass}}-rich"></div> </div> <div class="{{baseClass}}-content-source" style="display: none"> <textarea class="{{baseClass}}-area {{baseClass}}-source"></textarea> </div> </div> </div>',"snippet-menu.item":'<li><a data-name="{{name}}">{{name}}</a></li>',"special-characters.dialog":"<div> tr('specialCharactersHelp') <br/> <ul></ul> </div>","special-characters.tab-button":'<button data-setKey="{{setKey}}" data-charactersIndex="{{charactersIndex}}" title="{{description}}">{{htmlEntity}}</button>',"special-characters.tab-content":'<div id="{{baseClass}}-{{key}}"></div>',"special-characters.tab-li":'<li><a href="#{{baseClass}}-{{key}}">{{name}}</a></li>',"table.create-menu":'<table class="{{baseClass}}-menu"> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> </table>',"tag-menu.menu":"<li><a data-value=\"na\">tr('tagMenuTagNA')</a></li> <li><a data-value=\"p\">tr('tagMenuTagP')</a></li> <li><a data-value=\"h1\">tr('tagMenuTagH1')</a></li> <li><a data-value=\"h2\">tr('tagMenuTagH2')</a></li> <li><a data-value=\"h3\">tr('tagMenuTagH3')</a></li> <li><a data-value=\"h4\">tr('tagMenuTagH4')</a></li> <li><a data-value=\"div\">tr('tagMenuTagDiv')</a></li> <li><a data-value=\"pre\">tr('tagMenuTagPre')</a></li> <li><a data-value=\"address\">tr('tagMenuTagAddress')</a></li>","unsaved-edit-warning.warning":'<div class="{{baseClass}} ui-corner-tl"> <span class="ui-icon ui-icon-alert"></span> <span>tr(\'unsavedEditWarningText\')</span> </div>',"view-source.dialog":'<div class="{{baseClass}}-inner-wrapper"> <textarea></textarea> </div>',"lorem-ipsum.lorem-ipsum":"<h1>Sed erat aequius Triarium aliquid de dissensione nostra iudicare.</h1> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Si mala non sunt, iacet omnis ratio Peripateticorum. Sic enim censent, oportunitatis esse beate vivere. Cum id fugiunt, re eadem defendunt, quae Peripatetici, verba. <i>Istam voluptatem, inquit, Epicurus ignorat?</i> Ita fit cum gravior, tum etiam splendidior oratio. Expectoque quid ad id, quod quaerebam, respondeas. Maximas vero virtutes iacere omnis necesse est voluptate dominante. Duo Reges: constructio interrete. <a href='http://loripsum.net/' target='_blank'>Erat enim res aperta.</a> </p> <p>Cum id fugiunt, re eadem defendunt, quae Peripatetici, verba. Hic ambiguo ludimur. Quae quidem sapientes sequuntur duce natura tamquam videntes; Dic in quovis conventu te omnia facere, ne doleas. ALIO MODO. Qui enim existimabit posse se miserum esse beatus non erit. Haec bene dicuntur, nec ego repugno, sed inter sese ipsa pugnant. Nec lapathi suavitatem acupenseri Galloni Laelius anteponebat, sed suavitatem ipsam neglegebat; Hoc est non dividere, sed frangere. Potius ergo illa dicantur: turpe esse, viri non esse debilitari dolore, frangi, succumbere. <a href='http://loripsum.net/' target='_blank'>Quod vestri non item.</a> Quid est enim aliud esse versutum? </p> <h2>Profectus in exilium Tubulus statim nec respondere ausus;</h2> <p>Atque hoc loco similitudines eas, quibus illi uti solent, dissimillimas proferebas. Quae contraria sunt his, malane? <code>Eam tum adesse, cum dolor omnis absit;</code> Efficiens dici potest. Erat enim res aperta. <a href='http://loripsum.net/' target='_blank'>Traditur, inquit, ab Epicuro ratio neglegendi doloris.</a> Nonne videmus quanta perturbatio rerum omnium consequatur, quanta confusio? </p> <ol> <li>Ergo, si semel tristior effectus est, hilara vita amissa est?</li> <li>An vero displicuit ea, quae tributa est animi virtutibus tanta praestantia?</li> <li>Illa tamen simplicia, vestra versuta.</li> </ol> <ul> <li>Vide, quantum, inquam, fallare, Torquate.</li> <li>Ratio quidem vestra sic cogit.</li> <li>Atque hoc loco similitudines eas, quibus illi uti solent, dissimillimas proferebas.</li> <li>Istam voluptatem, inquit, Epicurus ignorat?</li> </ul> <h3>Dici enim nihil potest verius.</h3> <p>Et non ex maxima parte de tota iudicabis? Non minor, inquit, voluptas percipitur ex vilissimis rebus quam ex pretiosissimis. Omnes enim iucundum motum, quo sensus hilaretur. Varietates autem iniurasque fortunae facile veteres philosophorum praeceptis instituta vita superabat. Est enim tanti philosophi tamque nobilis audacter sua decreta defendere. Et ille ridens: Video, inquit, quid agas; At enim hic etiam dolore. Deinde disputat, quod cuiusque generis animantium statui deceat extremum. Beatus autem esse in maximarum rerum timore nemo potest. Rationis enim perfectio est virtus; Nemo igitur esse beatus potest. Hoc enim constituto in philosophia constituta sunt omnia. </p> <dl> <dt><dfn>Immo videri fortasse.</dfn></dt> <dd>Graecis hoc modicum est: Leonidas, Epaminondas, tres aliqui aut quattuor;</dd> <dt><dfn>Tubulo putas dicere?</dfn></dt> <dd>Honesta oratio, Socratica, Platonis etiam.</dd> <dt><dfn>Praeteritis, inquit, gaudeo.</dfn></dt> <dd>Et quidem saepe quaerimus verbum Latinum par Graeco et quod idem valeat;</dd> <dt><dfn>Scaevolam M.</dfn></dt> <dd>Cum autem venissemus in Academiae non sine causa nobilitata spatia, solitudo erat ea, quam volueramus.</dd> </dl> <h4>In schola desinis.</h4> <p>Tuo vero id quidem, inquam, arbitratu. <b>At, si voluptas esset bonum, desideraret.</b> Duo enim genera quae erant, fecit tria. Obsecro, inquit, Torquate, haec dicit Epicurus? </p> <blockquote cite='http://loripsum.net'> Atque haec contra Aristippum, qui eam voluptatem non modo summam, sed solam etiam ducit, quam omnes unam appellamus voluptatem. </blockquote> <pre> Idem fecisset Epicurus, si sententiam hanc, quae nunc Hieronymi est, coniunxisset cum Aristippi vetere sententia. Aut haec tibi, Torquate, sunt vituperanda aut patrocinium voluptatis repudiandum. </pre>"};a("en","English",{alignCenterTitle:"Align text center",alignJustifyTitle:"Align text justify",alignLeftTitle:"Align text left",alignRightTitle:"Align text right",cancelDialogCancelButton:"Continue Editing",cancelDialogContent:"Are you sure you want to cancel editing? All changes will be lost!",cancelDialogOKButton:"Cancel Editing",cancelDialogTitle:"Cancel Editing",cancelTitle:"Cancel editing",classMenuTitle:"Style picker",cleanBlockTitle:"Clean block",clearFormattingTitle:"Clear formatting",clickButtonToEditText:"Edit",clickButtonToEditTitle:null,closeTitle:"Close this toolbar",colorMenuBasicAutomatic:"Automatic",colorMenuBasicBlack:"Black",colorMenuBasicBlue:"Blue",colorMenuBasicGreen:"Green",colorMenuBasicGrey:"Grey",colorMenuBasicOrange:"Orange",colorMenuBasicPurple:"Purple",colorMenuBasicRed:"Red",colorMenuBasicTitle:"Change text color",colorMenuBasicWhite:"White",dockToElementTitle:"Dock/undock editor to element",dockToScreenTitle:"Dock/undock editor to screen",embedTitle:"Embed object",embedDialogTitle:"Embed Object",embedDialogTabCode:"Embed Code",embedDialogTabCodeContent:"Paste your embed code into the text area below:",embedDialogTabPreview:"Preview",embedDialogTabPreviewContent:"A preview of your embedded object is displayed below:",embedDialogOKButton:"Embed Object",embedDialogCancelButton:"Cancel",errorUINoName:'UI "{{ui}}" is invalid (must have a name property)',errorUINotObject:'UI "{{ui}}" is invalid (must be an object)',errorUIOverride:'UI "{{name}}" has already been registered, and will be overwritten',editPageDialogTitle:"Edit Page",editPageDialogOKButton:"Save",editPageDialogCancelButton:"Cancel",floatLeftTitle:"Align image to the left",floatNoneTitle:"Remove image align",floatRightTitle:"Align image to the right",fontFamilyMenuTitle:"Choose your font",fontFamilyMenuFontDefault:"Default Font",fontFamilyMenuFontArial:"Arial",fontFamilyMenuFontPalatino:"Palatino",fontFamilyMenuFontGeorgia:"Georgia",fontFamilyMenuFontTimes:"Times New Roman",fontFamilyMenuFontComicSans:"Comic Sans",fontFamilyMenuFontImpact:"Impact",fontFamilyMenuFontCourier:"Courier New",guidesTitle:"Show element guides",historyRedoTitle:"Redo",historyUndoTitle:"Undo",hrCreateTitle:"Insert Horizontal Rule",imageResizeDialogWidth:"Image width",imageResizeDialogHeight:"Image height",imageResizeDialogWidthPlaceHolder:"Width",imageResizeDialogHeightPlaceHolder:"Height",imageResizeDialogTitle:"Resize Image",imageResizeDialogOKButton:"Resize",imageResizeDialogCancelButton:"Cancel",imageResizeTitle:"Resize this image",insertFileTitle:"Insert file",insertFileDialogTitle:"Insert file",insertFileDialogOKButton:"Insert file",insertFileDialogCancelButton:"Cancel",insertFileURLLabel:"File URL",insertFileNameLabel:"File Name",insertFileURLPlaceHolder:"File URL...",insertFileNamePlaceHolder:"File Name...",languageMenuTitle:"Change Language",loremIpsumTitle:"Insert dummy text for testing",listOrderedTitle:"Ordered list",listUnorderedTitle:"Unordered list",linkCreateTitle:"Insert Link",linkRemoveTitle:"Remove Link",linkCreateDialogTitle:"Insert Link",linkCreateDialogOKButton:"Insert Link",linkCreateDialogCancelButton:"Cancel",linkCreateDialogMenuHeader:"Choose a link type",linkTypeEmailLabel:"Email address",linkTypeEmailHeader:"Link to an email address",linkTypeEmailToLabel:"Email:",linkTypeEmailToPlaceHolder:"Enter email address",linkTypeEmailSubjectLabel:"Subject (optional):",linkTypeEmailSubjectPlaceHolder:"Enter subject",linkTypeExternalLabel:"Page on another website",linkTypeExternalHeader:"Link to a page on another website",linkTypeExternalLocationLabel:"Location:",linkTypeExternalLocationPlaceHolder:"Enter a URL",linkTypeExternalNewWindowHeader:"New window",linkTypeExternalNewWindowLabel:"Check this box to have the link open in a new browser window/tab.",linkTypeExternalInfo:"<h2>Not sure what to put in the box above?</h2><ol>    <li>Find the page on the web you want to link to.</li>    <li>Copy the web address from your browser's address bar and paste it into the box above.</li></ol>",linkTypeDocumentLabel:"Document or other file",linkTypeDocumentHeader:"Link to a document or other file",linkTypeDocumentLocationLabel:"Location:",linkTypeDocumentLocationPlaceHolder:"Enter a URL",linkTypeDocumentNewWindowHeader:"New window",linkTypeDocumentNewWindowLabel:"Check this box to have the file open in a new browser window/tab.",linkTypeDocumentInfo:"<h2>Not sure what to put in the box above?</h2><ol>    <li>Ensure the file has been uploaded to your website.</li>    <li>Open the uploaded file in your browser.</li>    <li>Copy the file's URL from your browser's address bar and paste it into the box above.</li></ol>",linkTypeInternalLabel:"Page on this website",linkTypeInternalHeader:"Link to a page on this website",linkTypeInternalLocationLabel:"",linkTypeInternalLocationPlaceHolder:"Enter a URI",linkTypeInternalNewWindowHeader:"New window",linkTypeInternalNewWindowLabel:"Check this box to have the link open in a new browser window/tab.",linkTypeInternalInfo:'<h2>Not sure what to put in the box above?</h2><ol>    <li>Find the page on this site link to.</li>    <li>Copy the web address from your browser\'s address bar, excluding "{{domain}}" and paste it into the box above.</li></ol>',logoTitle:"Learn More About the Raptor WYSIWYG Editor",navigateAway:"\nThere are unsaved changes on this page. \nIf you navigate away from this page you will lose your unsaved changes",pasteDialogTitle:"Paste",pasteDialogOKButton:"Insert",pasteDialogCancelButton:"Cancel",pasteDialogPlain:"Plain Text",pasteDialogFormattedCleaned:"Formatted &amp; Cleaned",pasteDialogFormattedUnclean:"Formatted Unclean",pasteDialogSource:"Source Code",placeholderPluginDefaultContent:"<br/>",saveTitle:"Save content",saveNotConfigured:"Save has not been configured, or is disabled.",saveJsonFail:"Failed to save {{failed}} content block(s)",saveJsonSaved:"Successfully saved {{saved}} content block(s).",saveRestFail:"Failed to save {{failed}} content block(s).",saveRestPartial:"Saved {{saved}} out of {{failed}} content blocks.",saveRestSaved:"Successfully saved {{saved}} content block(s).",snippetMenuTitle:"Snippets",specialCharactersArrows:"Arrows",specialCharactersDialogOKButton:"OK",specialCharactersDialogTitle:"Insert Special Characters",specialCharactersGreekAlphabet:"Greek Alphabet",specialCharactersHelp:'Click a special character to add it. Click "OK" when done to close this dialog',specialCharactersMathematics:"Mathematics",specialCharactersSymbols:"Symbols",specialCharactersTitle:"Insert a special character",statisticsButtonCharacterOverLimit:"{{charactersRemaining}} characters over limit",statisticsButtonCharacterRemaining:"{{charactersRemaining}} characters remaining",statisticsButtonCharacters:"{{characters}} characters",statisticsDialogCharactersOverLimit:"{{characters}} characters, {{charactersRemaining}} over the recommended limit",statisticsDialogCharactersRemaining:"{{characters}} characters, {{charactersRemaining}} remaining",statisticsDialogNotTruncated:"Content will not be truncated",statisticsDialogOKButton:"Ok",statisticsDialogSentence:"{{sentences}} sentence",statisticsDialogSentences:"{{sentences}} sentences",statisticsDialogTitle:"Content Statistics",statisticsDialogTruncated:"Content contains more than {{limit}} characters and may be truncated",statisticsDialogWord:"{{words}} word",statisticsDialogWords:"{{words}} words",statisticsTitle:"Click to view statistics",imageSwapTitle:"Swap this image",tableCreateTitle:"Create table",tableDeleteColumnTitle:"Delete table column",tableDeleteRowTitle:"Delete table row",tableInsertColumnTitle:"Insert table column",tableInsertRowTitle:"Insert table row",tableMergeCellsTitle:"Merge table cells",tableSplitCellsTitle:"Split table cells",tagMenuTagH1:"Heading&nbsp;1",tagMenuTagH2:"Heading&nbsp;2",tagMenuTagH3:"Heading&nbsp;3",tagMenuTagH4:"Heading&nbsp;4",tagMenuTagNA:"N/A",tagMenuTagP:"Paragraph",tagMenuTagDiv:"Div",tagMenuTagPre:"Pre-formatted",tagMenuTagAddress:"Address",tagMenuTitle:"Change element style",tagTreeElementLink:"Select {{element}} element",tagTreeElementTitle:'Click to select the contents of the "{{element}}" element',tagTreeRoot:"root",tagTreeRootLink:"Select all editable content",tagTreeRootTitle:"Click to select all editable content",textBlockQuoteTitle:"Block quote",textBoldTitle:"Bold",textItalicTitle:"Italic",textStrikeTitle:"Strike through",textSubTitle:"Sub-script",textSuperTitle:"Super-script",textUnderlineTitle:"Underline",textSizeDecreaseTitle:"Decrease text size",textSizeIncreaseTitle:"Increase text size",unsavedEditWarningText:"There are unsaved changes on this page",revisionsText:"Revisions",revisionsTextEmpty:"No Revisions",revisionsTitle:null,revisionsCreated:"Created",revisionsApplyButtonTitle:"Rollback",revisionsApplyButtonText:"Rollback",revisionsAJAXFailed:"Failed to retrieve revisions",revisionsApplyButtonDialogCancelButton:"Cancel",revisionsApplyButtonDialogOKButton:"Rollback",revisionsApplyButtonDialogTitle:"Rollback Confirmation",revisionsApplyDialogContent:"This will replace the current content with the selected revision.<br/>The current content will be added as a revision, and will be visible in the revisions list for this block.",revisionsDialogCancelButton:"Cancel",revisionsDialogTitle:"View content revisions",revisionsButtonCurrent:"Current",revisionsButtonViewDiffText:"Differences",revisionsButtonViewDiffTitle:null,revisionsDiffButtonDialogCancelButton:"Close",revisionsDiffButtonDialogTitle:"View differences",revisionsDiffButtonTitle:"View differences",revisionsDiffButtonText:"View differences",revisionsLoading:"Loading revisions...",revisionsNone:"No revisions for this element",revisionsPreviewButtonTitle:"Preview",revisionsPreviewButtonText:"Preview",fileManagerDialogTitle:"File Manager",fileManagerTitle:"File Manager",rfmClose:"Close",rfmContinue:"Continue",rfmDeleteTitle:"Delete",rfmDownloadTitle:"Download",rfmEditTitle:"Edit",rfmFileActions:"Actions",rfmFileModificationTime:"Modified",rfmFileName:"Name",rfmFileSize:"Size",rfmFileType:"Type",rfmFilteredTotal:"Showing {{start}} to {{end}} of {{filteredTotal}} files",rfmFirst:"First",rfmHeadingDirectories:"Directories",rfmHeadingSearch:"Search",rfmHeadingTags:"Tags",rfmHeadingUpload:"Upload",rfmInsertTitle:"Insert",rfmLast:"Last",rfmRenameTitle:"Rename",rfmSearch:"Go",rfmTagDocument:"Document",rfmTagImage:"Image",rfmTotal:", filtered from {{total}}",rfmUpload:"Upload",rfmUploadBrowse:"Browse",rfmUploadDrop:"Drop Files Here",rfmUploadFileRemove:"Remove",rfmUploadOr:"or",rfmViewTitle:"View",imageEditorDialogCancelButton:"Cancel",imageEditorDialogOKButton:"Save",imageEditorDialogTitle:"Image Editor",imageEditorTitle:"Edit Image",rieApply:"Apply",rieBlurTitle:"Blur",rieBrightnessTitle:"Brightness/Contrast",rieCancel:"Cancel",rieCancelTitle:"Cancel",rieColorAdjustTitle:"Adjsut Color",rieCropTitle:"Crop",rieDesaturateTitle:"Desaturate",rieFlipHTitle:"Flip Horizontally",rieFlipVTitle:"Flip Vertically",rieGlowTitle:"Glow",rieHslTitle:"Hue, Saturation, Lightness.",rieInvertTitle:"Invert",riePosterizeTitle:"Posterize",rieRedoTitle:"Redo",rieRemoveNoiseTitle:"Remove Noise",rieResizeTitle:"Resize",rieRevertTitle:"Revert",rieRotateLeftTitle:"Rotate Left",rieRotateRightTitle:"Rotate Right",rieSaveTitle:"Save",rieSaveTitle:"Save",rieSepiaTitle:"Sepia",rieSharpenTitle:"Sharpen",rieSolarizeTitle:"Solarize",rieUndoTitle:"Undo",rieUploadTitle:"Upload",rieActionColorAdjustRed:"Red",rieActionColorAdjustGreen:"Green",rieActionColorAdjustBlue:"Blue",rieActionBrightnessBrightness:"Brightness",rieActionBrightnessContrast:"Contrast",rieActionGlowAmount:"Glow Amount",rieActionGlowRadius:"Glow Radius",rieActionHsl:"Hue",rieActionHsl:"Saturation",rieActionHsl:"Lightness",rieActionPosterize:"Levels",viewSourceDialogCancelButton:"Close",viewSourceDialogOKButton:"Apply source code",viewSourceDialogTitle:"Content source code",viewSourceTitle:"View/edit source code"});
var Co=["a","abbr","acronym","applet","b","basefont","bdo","big","br","button","cite","code","dfn","em","font","i","iframe","img","input","kbd","label","map","object","p","q","s","samp","select","small","span","strike","strong","sub","sup","textarea","tt","u","var","h1","h2","h3","h4","h5","h6"],wo=["article","nav","section","footer","blockquote","body","button","center","dd","div","fieldset","form","iframe","li","noframes","noscript","object","td","th"],To=["body","center","dd","div","dt","fieldset","form","iframe","li","td","th"],ko=["address","blockquote","body","button","center","dd","div","fieldset","form","iframe","li","noframes","noscript","object","td","th"],Eo=!1,xo=jQuery;xo(function(){rangy.initialized||rangy.init(),xo.isFunction(rangy.rangePrototype.insertNodeAtEnd)||(rangy.rangePrototype.insertNodeAtEnd=function(e){var t=this.cloneRange();t.collapse(!1),t.insertNode(e),t.detach(),this.setEndAfter(e)})}),xo("html").click(function(){xo(".ui-editor-selectmenu-visible").removeClass("ui-editor-selectmenu-visible")});var So,Po,Do,Ro,Ao;Object.create||(Object.create=function(e){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=e,new t}),"undefined"==typeof Node&&(Node={TEXT_NODE:3}),"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}),"undefined"==typeof jQuery?t("jQuery is required"):jQuery.ui?jQuery.ui.dialog?jQuery.ui.position||t("jQuery UI Position is required."):t("jQuery UI Dialog is required."):t("jQuery UI is required"),"undefined"==typeof rangy&&t('Rangy is required. This library should have been included with the file you downloaded. If not, acquire it here: http://code.google.com/p/rangy/"');var Bo=xn("1.9.0",jQuery.fn.jquery);"1.9.0"===Bo&&t("jQuery version should be at least 1.9.0");var No=xn("1.10.0",jQuery.ui.version);"1.10.0"===No&&t("jQuery UI version should be at least 1.9.0");var Io={globalDefaults:{},defaults:{},enableHotkeys:!0,hotkeys:{},plugins:{},ui:{},layouts:{},presets:{},hoverPanels:{},instances:[],getInstances:function(){return this.instances},eachInstance:function(e){for(var t=0;t<this.instances.length;t++)e.call(this.instances[t],this.instances[t])},urlPrefix:"/raptor/",getTemplate:function(e,t){var i;if(this.templates[e])i=this.templates[e];else{var n=t||this.urlPrefix,o=e.split(".");n+=1===o.length?"templates/"+o[0]+".html":"plugins/"+o[0]+"/templates/"+o.splice(1).join("/")+".html",xo.ajax({url:n,type:"GET",async:!1,cache:!1,timeout:15e3,error:function(){i=null},success:function(e){i=e}}),this.templates[e]=i}return i},isDirty:function(){for(var e=this.getInstances(),t=0;t<e.length;t++)if(e[t].isDirty())return!0;return!1},unloadWarning:function(){for(var e=this.getInstances(),t=0;t<e.length;t++)if(e[t].isDirty()&&e[t].isEditing()&&e[t].options.unloadWarning)return l("navigateAway")},registerUi:function(e){return"object"!=typeof e?(t(l("errorUINotObject",{ui:e})),void 0):"string"!=typeof e.name?(t(l("errorUINoName",{ui:e})),void 0):(this.ui[e.name]&&t(l("errorUIOverride",{name:e.name})),this.ui[e.name]=e,void 0)},registerLayout:function(e){return"object"!=typeof e?(t('Layout "'+e+'" is invalid (must be an object)'),void 0):"string"!=typeof e.name?(t('Layout "'+e+'" is invalid (must have a name property)'),void 0):(this.layouts[e.name]&&t('Layout "'+e.name+'" has already been registered, and will be overwritten'),this.layouts[e.name]=e,void 0)},registerPlugin:function(e){return"object"!=typeof e?(t('Plugin "'+e+'" is invalid (must be an object)'),void 0):"string"!=typeof e.name?(t('Plugin "'+e+'" is invalid (must have a name property)'),void 0):(this.plugins[e.name]&&t('Plugin "'+e.name+'" has already been registered, and will be overwritten'),this.plugins[e.name]=e,void 0)},registerPreset:function(e,i){return"object"!=typeof e?(t('Preset "'+e+'" is invalid (must be an object)'),void 0):"string"!=typeof e.name?(t('Preset "'+e+'" is invalid (must have a name property)'),void 0):(this.presets[e.name]&&t('Preset "'+e.name+'" has already been registered, and will be overwritten'),this.presets[e.name]=e,i&&(this.defaults=e),void 0)},persist:function(e,t,i){e=i?i+"."+e:e;try{if(localStorage){var n;if(n=localStorage.uiWidgetEditor?JSON.parse(localStorage.uiWidgetEditor):{},void 0===t)return n[e];n[e]=t,localStorage.uiWidgetEditor=JSON.stringify(n)}}catch(o){}return t}},Oo=!1,Mo={_init:function(){if(this.element.attr("data-raptor-initialised"))return ho>=uo&&e("Raptor already initialised, attempted to reinitialise on: ",this.element),void 0;this.element.attr("data-raptor-initialised",!0),-1===xo.inArray(this,Io.instances)&&Io.instances.push(this);var i=this;Io.eachInstance(function(e){i!=e&&i.element.closest(e.element).length&&t("Nesting editors is unsupported",i.element,e.element)});var n=this.persist("locale")||this.options.initialLocale;n&&(go=n);var o=this.options;this.options=this.options.preset?xo.extend(!0,{},Io.globalDefaults,Io.presets[this.options.preset],this.options):xo.extend(!0,{},Io.globalDefaults,Io.defaults,this.options),o.layouts&&o.layouts.toolbar&&o.layouts.toolbar.uiOrder&&(this.options.layouts.toolbar.uiOrder=o.layouts.toolbar.uiOrder),this.element.attr("id")||this.element.attr("id",wt()),this.ready=!1,this.events={},this.plugins={},this.layouts={},this.templates=xo.extend({},Io.templates),this.target=this.element,this.layout=null,this.previewState=null,this.pausedState=null,this.pausedScrollX=null,this.pausedScrollY=null,this.enabled=!1,this.initialised=!1,this.uiObjects={},this.hotkeys={},this.hotkeysSuspended=!1,this.options.enableHotkeys&&this.registerHotkey(this.hotkeys);for(var a in this.options.bind)this.bind(a,this.options.bind[a]);this.history=[],this.present=0,this.historyEnabled=!0,En()&&(this.setOriginalHtml(this.element.is(":input")?this.element.val():this.element.html()),this.historyPush(this.getOriginalHtml()),this.element.is(":input")&&this.replaceOriginal(),this.loadPlugins(),this.dirty=!1,this.previousContent=null,this.previousSelection=null,this.getElement().addClass("raptor-editable-block"),this.loadLayouts(),this.ready=!0,this.fire("ready"),this.options.autoEnable&&xo(function(){i.enableEditing()}))},attach:function(){this.bind("change",this.historyPush),this.getElement().on("click.raptor","img",function(e){Ti(e.target),this.checkSelectionChange()}.bind(this)),this.getElement().on("focus.raptor",this.showLayout.bind(this)),this.target.on("mouseup.raptor",this.checkSelectionChange.bind(this)),this.target.on("input.raptor",this.checkChange.bind(this)),xo(window).bind("beforeunload",Io.unloadWarning.bind(Io));var e=this;xo(window).resize(function(){e.fire("resize")})},detach:function(){this.unbind("change"),this.getElement().off("click.raptor","img"),this.getElement().off("focus.raptor"),this.getElement().blur(),this.target.off("mouseup.raptor"),this.target.off("keyup.raptor")},localeChange:function(){if(!this.ready){var e;return e=function(){this.unbind("ready",e),this.localeChange()},this.bind("ready",e),void 0}this.actionPreviewRestore();var t=[];for(var i in this.layouts)this.layouts[i].isVisible()&&t.push(i);this.layoutsDestruct(),this.events={},this.plugins={},this.uiObjects={},this.hotkeys={},this.loadPlugins(),this.loadLayouts();for(var n=0;n<t.length;n++)this.layouts[t[n]].show();this.checkSelectionChange()},restoreFocus:function(){this.getElement().focus()},getElement:function(){return this.target},getNode:function(){return this.target[0]},getOriginalElement:function(){return this.element},replaceOriginal:function(){if(this.target.is(":input")){for(var e=xo("<div/>").html(this.element.val()).insertBefore(this.element).attr("id",wt()).addClass(this.element.attr("class")).addClass(this.options.classes),t=ht(this.element),i=0;i<this.options.replaceStyle.length;i++)e.css(this.options.replaceStyle[i],t[this.options.replaceStyle[i]]);this.element.hide(),this.bind("change",function(){this.getOriginalElement().is(":input")?this.getOriginalElement().val(this.getHtml()).trigger("input"):this.getOriginalElement().html(this.getHtml())}),this.target=e}},checkSelectionChange:function(){var e=rangy.serializeSelection(null,!1);this.previousSelection!==e&&this.fire("selectionChange"),this.previousSelection=e},checkChange:function(){var e=this.getHtml(),t=this.dirty;this.dirty=this.originalHtml!==e,this.previousHtml!==e&&(this.previousHtml=e,this.fire("change",[e]),t!==this.dirty&&(this.dirty?this.fire("dirty"):this.fire("cleaned")),this.checkSelectionChange())},change:function(){this.fire("change",[this.getHtml()])},destruct:function(){this.disableEditing(),this.fire("destroy"),this.events={},this.getElement().off(".raptor"),this.getOriginalElement().is(":input")&&(this.target.remove(),this.target=null,this.element.show()),this.layoutsDestruct()},actionPreview:function(e){this.actionPreviewRestore();try{var i=this.fire("selectionCustomise");i.length>0?this.previewState=U(this.previewState,this.target,function(){for(var t=0,n=i.length;n>t;t++)rangy.getSelection().setSingleRange(i[t]),this.selectionConstrain(),e()}.bind(this)):(this.selectionConstrain(),this.previewState=U(this.previewState,this.target,e)),this.checkSelectionChange()}catch(n){t(n)}},actionPreviewRestore:function(){this.previewState&&(this.target=F(this.previewState,this.target),this.previewState=null,this.checkSelectionChange())},actionApply:function(e){this.actionPreviewRestore();var i=this.stateSave();try{var n=this.fire("selectionCustomise");n.length>0?q(function(){for(var t=0,i=n.length;i>t;t++)rangy.getSelection().setSingleRange(n[t]),this.selectionConstrain(),q(e,this.history)}.bind(this),this.history):(this.selectionConstrain(),q(e,this.history)),this.checkChange()}catch(o){this.stateRestore(i),t(o)}},actionUndo:function(){},actionRedo:function(){},stateSave:function(){return this.selectionConstrain(),en(this.target)},stateRestore:function(e){var t=tn(this.target,e),i=rangy.getSelection();this.target=t.element,null!==t.ranges&&(i.setRanges(t.ranges),i.refresh())},selectionConstrain:function(){Qi(this.target[0])},pause:function(){this.pausedState||(this.pausedState=this.stateSave(),this.suspendHotkeys(),this.pausedScrollX=window.scrollX,this.pausedScrollY=window.scrollY)},resume:function(){this.pausedState&&(this.stateRestore(this.pausedState),this.pausedState=null,this.resumeHotkeys(),this.restoreFocus(),window.scrollTo(this.pausedScrollX,this.pausedScrollY))},persist:function(e,t){return this.options.persistence?Io.persist(e,t,this.options.namespace):null},enableEditing:function(){if(!this.enabled){if(this.fire("enabling"),this.attach(),this.enabled=!0,this.getElement().addClass(this.options.baseClass+"-editing").addClass(this.options.classes),this.options.partialEdit?this.getElement().find(this.options.partialEdit).prop("contenteditable",!0):this.getElement().prop("contenteditable",!0),!this.initialised){this.initialised=!0;for(var e in this.plugins)this.plugins[e].enable();this.bindHotkeys(),this.getElement().closest("form").on("submit.raptor",function(){$(this.getElement()),this.fire("change",[this.getHtml()])}.bind(this))}$(this.getElement()),this.fire("enabled"),this.showLayout();var t=this.options.partialEdit?this.getElement().find("[contenteditable]")[0]:this.getNode();switch(this.options.autoSelect){case"all":wi(t);break;case"start":var i=xo(t).find("*:first")[0];if(!i){wi(t);break}var n=rangy.createRange();n.setStartBefore(i),n.setEndBefore(i),yi(n);break;case"end":var i=xo(t).find("*:last")[0];if(!i){wi(t);break}wi(i);var n=rangy.createRange();n.setStartAfter(i),n.setEndAfter(i),yi(n)}}},disableEditing:function(){this.enabled&&(this.detach(),this.enabled=!1,this.getElement().prop("contenteditable",!1).removeClass(this.options.baseClass+"-editing").removeClass(this.options.classes),rangy.getSelection().removeAllRanges(),this.fire("disabled"),this.options.reloadOnDisable&&!Oo&&(Oo=!0,window.location.reload()))},cancelEditing:function(){this.unify(function(e){e.stopEditing()})},stopEditing:function(){this.fire("cancel"),this.options.reloadOnDisable||this.resetHtml(),this.disableEditing(),this.dirty=!1,fi()},isEditing:function(){return this.enabled},isRoot:function(e){return this.getElement()[0]===xo(e)[0]},unify:function(e,t){if(t!==!1&&e(this),this.options.unify){var i=this;Io.eachInstance(function(t){t!==i&&t.options.unify&&e(t)})}},getLayout:function(e){return"undefined"==typeof e?(n("Parameter 1 to getLayout is expected to be a layout type",e),void 0):this.layouts[e]},loadLayouts:function(){for(var e in this.options.layouts)"undefined"!=typeof Io.layouts[e]?(this.layouts[e]=this.prepareComponent(Io.layouts[e],this.options.layouts[e],"layout").instance,this.layouts[e].hotkeys&&this.registerHotkey(this.layouts[e].hotkeys,null,this.layouts[e])):t("Unknown layout type: "+e)},layoutsDestruct:function(){for(var e in this.layouts)this.layouts[e].destruct()},prepareComponent:function(e,i,n){var o=xo.extend({},e),a=xo.extend({},this.options,{baseClass:this.options.baseClass+"-"+n+"-"+g(e.name)},o.options,i);o.raptor=this,o.options=a,o.init||t("Component missing init function: "+o.name);var r=o.init();return{init:r,instance:o}},showLayout:function(){ho>=uo&&e("Displaying layout",this.getElement()),this.unify(function(e){e.fire("layoutHide")},!1),this.fire("layoutShow"),this.fire("resize"),"undefined"==typeof this.getElement().attr("tabindex")&&this.getElement().attr("tabindex",-1)},getTemplate:function(e,i){return this.templates[e]||(this.templates[e]=m(e,this.options.urlPrefix)),this.templates[e]?f(this.templates[e],i):(t("Missing template: "+e),"**MISSING TEMPLATE: "+e+"**")},historyPush:function(){if(this.historyEnabled){var e=this.getHtml();e!==this.historyPeek()&&(this.present!==this.history.length-1&&(this.history=this.history.splice(0,this.present+1)),this.history.push(this.getHtml()),this.present=this.history.length-1,this.fire("historyChange"))}},historyPeek:function(){return this.history.length?this.history[this.present]:null},historyBack:function(){this.present>0&&(this.present--,this.setHtml(this.history[this.present]),this.historyEnabled=!1,this.change(),this.historyEnabled=!0,this.fire("historyChange"))},historyForward:function(){this.present<this.history.length-1&&(this.present++,this.setHtml(this.history[this.present]),this.historyEnabled=!1,this.change(),this.historyEnabled=!0,this.fire("historyChange"))},registerHotkey:function(e,i){return y(e)?(this.hotkeys[e]&&t('Hotkey "'+e+'" has already been registered, and will be overwritten'),this.hotkeys[e]=i,void 0):(n("Expected argument 1 to raptor.registerHotkey to be a string"),void 0)},bindHotkeys:function(){for(var e in this.hotkeys)this.getElement().on("keydown.raptor",e,function(e){if(this.isEditing()&&!this.hotkeysSuspended){var t=this.hotkeys[e.data]();t!==!1&&e.preventDefault()}}.bind(this))},suspendHotkeys:function(){ho>=uo&&e("Disabling hotkeys"),this.hotkeysSuspended=!0},resumeHotkeys:function(){ho>=uo&&e("Enabling hotkeys"),this.hotkeysSuspended=!1},isUiEnabled:function(t){return this.options.enableUi===!1&&"undefined"==typeof this.options.plugins[t]||this.options.plugins[t]===!1?(ho>=uo&&e("UI with name "+t+" has been disabled "+(this.options.enableUi===!1?"by default":"manually")+" "+xo.inArray(t,this.options.ui)),!1):-1!==xo.inArray(t,this.options.disabledUi)||-1!==xo.inArray(t,this.options.disabledPlugins)?(e("Using disabledUi/disabledPlugins options is deprecated, use plugins: { nameOfPlugin: false } instead."),!1):!0},getUi:function(e){return t("raptor.getUi() is deprecated, use raptor.getPlugin() instead."),this.uiObjects[e]},getPlugin:function(e){return this.uiObjects[e]||this.plugins[e]},loadPlugins:function(){var t=this;this.options.plugins||(this.options.plugins={});for(var i in Io.plugins)this.options.enablePlugins===!1&&"undefined"==typeof this.options.plugins[i]||this.options.plugins[i]===!1?ho>=uo&&e("Not loading plugin "+i):-1===xo.inArray(i,this.options.disabledUi)&&-1===xo.inArray(i,this.options.disabledPlugins)?t.plugins[i]=this.prepareComponent(Io.plugins[i],t.options.plugins[i],"plugin").instance:e("Using disabledUi/disabledPlugins options is deprecated, use plugins: { nameOfPlugin: false } instead.")},isDirty:function(){return this.dirty},getHtml:function(){return this.getElement().html()},clean:function(){this.actionApply(function(){$(this.getElement())}.bind(this))},setHtml:function(e){this.getElement().html(e),this.fire("html"),this.checkChange()},resetHtml:function(){this.setHtml(this.getOriginalHtml()),this.fire("cleaned")},getOriginalHtml:function(){return this.originalHtml},saved:function(e){this.setOriginalHtml(this.getHtml()),this.dirty=!1,this.fire("saved",e),this.fire("cleaned")},setOriginalHtml:function(e){this.originalHtml=e},bind:function(e,i,n){if("undefined"==typeof i||!xo.isFunction(i))return t("Must bind a valid callback, "+e+" was a "+typeof i),void 0;for(var o=e.split(/,\s*/),a=0,r=o.length;r>a;a++)this.events[o[a]]||(this.events[o[a]]=[]),this.events[o[a]].push({context:n,callback:i})},unbind:function(e,t,i){for(var n=0,o=this.events[e].length;o>n;n++)this.events[e][n]&&this.events[e][n].callback===t&&this.events[e][n].context===i&&this.events[e].splice(n,1)},fire:function(t,i){var n=[];if(ho===po&&e("Firing event: "+t),this.events[t])for(var o=0,a=this.events[t].length;a>o;o++){var r=this.events[t][o];if("undefined"!=typeof r&&"undefined"!=typeof r.callback){var s=r.callback.apply(r.context||this,i);"undefined"!=typeof s&&(n=n.concat(s))}}return n}};xo.widget("ui.raptor",Mo),xo.fn.raptor.Raptor=Io,Sn.prototype.init=function(){},Sn.prototype.destruct=function(){},Sn.prototype.isVisible=function(){return!1},Sn.prototype.show=function(){},Sn.prototype.hide=function(){},Pn.prototype.init=function(){},Pn.prototype.enable=function(){},Dn.prototype.appendTo=function(e,i){for(var n=0,o=this.uiOrder.length;o>n;n++){for(var a=xo("<div/>").addClass(this.raptor.options.baseClass+"-layout-toolbar-group"),r=this.uiOrder[n],s=0,l=r.length;l>s;s++)if(this.raptor.isUiEnabled(r[s]))if(Io.ui[r[s]]){var c=this.raptor.options.plugins[r[s]];if(c===!1)continue;var u=this.raptor.prepareComponent(Io.ui[r[s]],c,"ui");u.instance.layout=e,this.raptor.uiObjects[r[s]]=u.instance,k(u.init)&&(u.init.removeClass("ui-corner-all"),a.append(u.init))}else t('UI identified by key "'+r[s]+'" does not exist');a.children().length>0&&a.appendTo(i)}i.find(".ui-button:first-child").addClass("ui-corner-left"),i.find(".ui-button:last-child").addClass("ui-corner-right")},Rn.prototype=Object.create(Sn.prototype),Rn.prototype.init=function(){this.raptor.bind("enabled",this.show.bind(this)),this.raptor.bind("disabled",this.hide.bind(this)),this.raptor.bind("layoutShow",this.show.bind(this)),this.raptor.bind("layoutHide",this.hide.bind(this)),xo(window).resize(this.constrainPosition.bind(this))},Rn.prototype.destruct=function(){this.wrapper&&(this.wrapper.remove(),this.wrapper=null),this.raptor.fire("toolbarDestroy")},Rn.prototype.show=function(){this.isVisible()||(this.getElement().css("display",""),this.constrainPosition(),this.raptor.fire("toolbarShow"))},Rn.prototype.hide=function(){this.isReady()&&(this.getElement().css("display","none"),this.raptor.fire("toolbarHide"))},Rn.prototype.initDragging=function(){if(xo.fn.draggable&&this.options.draggable&&!this.getElement().data("ui-draggable")){ho>=uo&&e("Initialising toolbar dragging",this.raptor.getElement()),this.getElement().draggable({cancel:"a, button",cursor:"move",stop:this.constrainPosition.bind(this)}),this.getElement().css("position","fixed");var t=this.raptor.persist("position")||this.options.dialogPosition;t||(t=[10,10]),ho>=uo&&e("Restoring toolbar position",this.raptor.getElement(),t),parseInt(t[0],10)+this.getElement().outerHeight()>xo(window).height()&&(t[0]=xo(window).height()-this.getElement().outerHeight()),parseInt(t[1],10)+this.getElement().outerWidth()>xo(window).width()&&(t[1]=xo(window).width()-this.getElement().outerWidth()),this.getElement().css({top:Math.abs(parseInt(t[0],10)),left:Math.abs(parseInt(t[1],10))})}},Rn.prototype.enableDragging=function(){xo.fn.draggable&&this.options.draggable&&this.getElement().data("ui-draggable")&&this.getElement().draggable("enable")},Rn.prototype.disableDragging=function(){xo.fn.draggable&&this.options.draggable&&this.getElement().is(".ui-draggable")&&this.getElement().draggable("disable").removeClass("ui-state-disabled")},Rn.prototype.isReady=function(){return null!==this.wrapper},Rn.prototype.isVisible=function(){return this.isReady()&&this.getElement().is(":visible")},Rn.prototype.constrainPosition=function(){if(this.isVisible()){var e=parseInt(this.wrapper.css("left"))||-999,t=parseInt(this.wrapper.css("top"))||-999,i=this.wrapper.outerWidth(),n=this.wrapper.outerHeight(),o=xo(window).width(),a=xo(window).height(),r=Math.max(0,Math.min(e,o-i)),s=Math.max(0,Math.min(t,a-n));(r!==e||s!==t)&&this.wrapper.css({left:r,top:s}),this.raptor.persist("position",[this.wrapper.css("top"),this.wrapper.css("left")])}},Rn.prototype.getElement=function(){if(null===this.wrapper){if(!this.options.uiOrder){this.options.uiOrder=[[]];for(var t in Io.ui)this.options.uiOrder[0].push(t)}ho>=uo&&e("Loading toolbar",this.raptor.getElement());var i=this.toolbar=xo("<div/>").addClass(this.options.baseClass+"-toolbar"),n=this.toolbarWrapper=xo("<div/>").addClass(this.options.baseClass+"-inner").addClass("ui-widget-content").mousedown(function(e){e.preventDefault()}).append(i),o=this.path=xo("<div/>").addClass(this.options.baseClass+"-path").addClass("ui-widget-header"),a=this.wrapper=xo("<div/>").addClass(this.options.baseClass+"-outer "+this.raptor.options.baseClass+"-layout").css("display","none").append(o).append(n),r=new Dn(this.raptor,this.options.uiOrder);r.appendTo(this,this.toolbar),xo("<div/>").css("clear","both").appendTo(this.toolbar),xo(function(){a.appendTo("body"),this.initDragging(),this.constrainPosition(!0),this.raptor.fire("layoutReady",[this.wrapper]),this.raptor.fire("toolbarReady",[this])}.bind(this))}return this.wrapper},Io.registerLayout(new Rn),An.prototype=Object.create(Sn.prototype),An.prototype.init=function(){this.raptor.bind("ready",this.ready.bind(this)),this.raptor.bind("enabled",this.enabled.bind(this))},An.prototype.ready=function(){this.raptor.getElement().mouseenter(this.show.bind(this)).mouseleave(this.hide.bind(this))},An.prototype.enabled=function(){this.getElement().hide()},An.prototype.getElement=function(){if(null===this.hoverPanel){this.hoverPanel=xo("<div/>").addClass(this.raptor.options.baseClass+"-layout "+this.options.baseClass).mouseleave(this.hide.bind(this));var e=new Dn(this.raptor,this.options.uiOrder);e.appendTo(this,this.hoverPanel),xo(window).bind("scroll",this.position.bind(this)),this.hoverPanel.appendTo("body"),this.raptor.fire("layoutReady",[this.hoverPanel])}return this.hoverPanel},An.prototype.show=function(){this.raptor.isEditing()||(this.visible=!0,this.getElement().show(),this.position(),this.raptor.getElement().addClass(this.raptor.options.baseClass+"-editable-block-hover"))},An.prototype.hide=function(e){this.visible&&e&&(xo.contains(this.getElement().get(0),e.relatedTarget)||e.relatedTarget!==this.getElement().get(0)&&this.getElement().get(0)!==xo(e.relatedTarget).parent().get(0)&&(xo.contains(this.raptor.getElement().get(0),e.relatedTarget)||e.relatedTarget!==this.raptor.getElement().get(0)&&(this.visible=!1,this.getElement().hide(),this.raptor.getElement().removeClass(this.raptor.options.baseClass+"-editable-block-hover"))))},An.prototype.position=function(){if(this.visible){var e=pt(this.raptor.getElement());this.getElement().css({top:e.top+(e.height/2-this.getElement().outerHeight()/2),left:e.left+(e.width/2-this.getElement().outerWidth()/2)})}},An.prototype.destruct=function(){this.hoverPanel&&(this.hoverPanel.remove(),this.hoverPanel=null),this.visible=!1},Io.registerLayout(new An),Bn.prototype=Object.create(Sn.prototype),Bn.prototype.init=function(){this.raptor.bind("ready",this.ready.bind(this))},Bn.prototype.ready=function(){this.raptor.getElement().on("mouseenter",this.options.elements,this.show.bind(this)).on("mouseleave",this.options.elements,this.hide.bind(this))},Bn.prototype.getElement=function(){if(null===this.hoverPanel){this.hoverPanel=xo("<div/>").addClass(this.raptor.options.baseClass+"-layout raptor-layout-hover-panel "+this.options.baseClass).mouseleave(this.hide.bind(this));var e=new Dn(this.raptor,this.options.uiOrder);e.appendTo(this,this.hoverPanel),xo(window).bind("scroll",this.position.bind(this)),this.hoverPanel.appendTo("body"),this.raptor.fire("layoutReady",[this.hoverPanel])}return this.hoverPanel},Bn.prototype.show=function(e){this.enabled&&this.raptor.isEditing()&&(this.target=e.target,this.visible=!0,kt(this.getElement().show(),xo(this.target)))},Bn.prototype.hide=function(e){if(this.visible){if(e){if(xo.contains(this.getElement().get(0),e.relatedTarget))return;if(e.relatedTarget===this.getElement().get(0))return;if(this.getElement().get(0)===xo(e.relatedTarget).parent().get(0))return;if(xo.contains(this.raptor.getElement().get(0),e.relatedTarget))return;if(e.relatedTarget===this.raptor.getElement().get(0))return}this.visible=!1,this.getElement().hide()}},Bn.prototype.close=function(){this.visible&&(this.enabled=!1,this.visible=!1,this.getElement().hide(),setTimeout(function(){this.enabled=!0}.bind(this),1e3))},Bn.prototype.position=function(){this.visible&&kt(this.getElement(),xo(this.target))},Bn.prototype.destruct=function(){this.hoverPanel&&(this.hoverPanel.remove(),this.hoverPanel=null),this.visible=!1},Io.registerLayout(new Bn),Nn.prototype.init=function(){if("string"==typeof this.hotkey)this.raptor.registerHotkey(this.hotkey,this.action.bind(this));else if(C(this.hotkey))for(var e=0,t=this.hotkey.length;t>e;e++)this.raptor.registerHotkey(this.hotkey[e],this.action.bind(this));return this.getButton()},Nn.prototype.getButton=function(){if(!this.button){var e=this.text||this.translate("Text",!1);this.button=xo("<div>").html(e).addClass(this.options.baseClass).attr("title",this.getTitle()).click(this.click.bind(this)),x(this.button,{icons:{primary:this.getIcon()},text:e,label:this.label})}return this.button},Nn.prototype.getTitle=function(){return this.title||this.translate("Title")},Nn.prototype.getIcon=function(){return null===this.icon?"ui-icon-"+on(this.name):this.icon},Nn.prototype.click=function(){R(this.button)&&this.raptor.actionApply(this.action.bind(this))},Nn.prototype.translate=function(e,t){return l(this.name+e,t)},In.prototype=Object.create(Nn.prototype),In.prototype.init=function(){return this.preview="undefined"==typeof this.options.preview?!0:!1,Nn.prototype.init.apply(this,arguments)},In.prototype.getButton=function(){return this.button||(this.button=Nn.prototype.getButton.call(this).mouseenter(this.mouseEnter.bind(this)).mouseleave(this.mouseLeave.bind(this))),this.button},In.prototype.mouseEnter=function(){this.canPreview()&&(this.previewing=!0,this.raptor.actionPreview(this.action.bind(this)))},In.prototype.mouseLeave=function(){this.previewing=!1,this.raptor.actionPreviewRestore()},In.prototype.click=function(){return this.previewing=!1,this.raptor.actionPreviewRestore(),Nn.prototype.click.apply(this,arguments)},In.prototype.canPreview=function(){return this.preview},In.prototype.isPreviewing=function(){return this.previewing},On.prototype=Object.create(Nn.prototype),On.prototype.init=function(){return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),Nn.prototype.init.apply(this,arguments)},On.prototype.selectionChange=function(){this.selectionToggle()?(B(this.button),this.disable&&D(this.button)):(N(this.button),this.disable&&A(this.button))},Mn.prototype=Object.create(In.prototype),Mn.prototype.init=function(){return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),In.prototype.init.apply(this,arguments)},Mn.prototype.selectionChange=function(){this.selectionToggle()?this.isPreviewing()||B(this.button):N(this.button)},Ln.prototype=Object.create(In.prototype),Ln.prototype.init=function(){var e=In.prototype.init.apply(this,arguments);return this.raptor.bind("selectionChange",this.selectionChange.bind(this)),e},Ln.prototype.selectionChange=function(){this.isEnabled()?D(this.button):A(this.button)},Ln.prototype.getElement=function(){throw new Error("Expected child class to override FilteredPreviewButton.getElement")},Ln.prototype.canPreview=function(){return In.prototype.canPreview.call(this)&&this.isEnabled()},Ln.prototype.isEnabled=function(){var e=hi();return e?!!this.getElement(e):!!this.previewing},Ln.prototype.action=function(){vi(function(e){var t=this.getElement(e);t&&this.applyToElement(t)}.bind(this))},Hn.prototype=Object.create(Mn.prototype),Hn.prototype.action=function(){Xi(),this.raptor.selectionConstrain();for(var e=0,t=this.classes.length;t>e;e++){var i=rangy.createCssClassApplier(this.options.cssPrefix+this.classes[e],{elementTagName:this.tag||"span"});i.toggleSelection()}},Hn.prototype.selectionToggle=function(){for(var e=0,t=this.classes.length;t>e;e++){var i=rangy.createCssClassApplier(this.options.cssPrefix+this.classes[e],{elementTagName:this.tag||"span"});if(!i.isAppliedToSelection())return!1}return!0};var Lo={};jn.prototype=Object.create(Nn.prototype),jn.prototype.action=function(){this.openDialog()},jn.prototype.applyAction=function(){throw new Error("Expected child class to override DialogButton.applyAction")},jn.prototype.getDialogTemplate=function(){throw new Error("Expected child class to override DialogButton.getDialogTemplate")},jn.prototype.validateDialog=function(){return!0},jn.prototype.openDialog=function(){this.raptor.pause(),M(this.getDialog())},jn.prototype.onDialogClose=function(){Lo[this.name].instance.raptor.resume()},jn.prototype.okButtonClick=function(){var e=Lo[this.name].instance.validateDialog();e===!0&&(L(Lo[this.name].dialog),Lo[this.name].instance.applyAction.call(Lo[this.name].instance,Lo[this.name].dialog))},jn.prototype.closeDialog=function(){L(Lo[this.name].dialog)},jn.prototype.cancelButtonClick=jn.prototype.closeDialog,jn.prototype.getOkButton=function(e){return{text:l(e+"DialogOKButton"),click:this.okButtonClick.bind(this),icons:{primary:"ui-icon-circle-check"}}},jn.prototype.getCancelButton=function(e){return{text:l(e+"DialogCancelButton"),click:this.cancelButtonClick.bind(this),icons:{primary:"ui-icon-circle-close"}}},jn.prototype.getDefaultDialogOptions=function(e){var t={modal:!0,resizable:!0,autoOpen:!1,title:l(e+"DialogTitle"),dialogClass:this.options.baseClass+"-dialog "+this.options.dialogClass,close:this.onDialogClose.bind(this),buttons:[]},i=this.getOkButton(e),n=this.getCancelButton(e);return"undefined"!=typeof i&&i!==!1&&t.buttons.push(i),"undefined"!=typeof n&&n!==!1&&t.buttons.push(n),t},jn.prototype.getDialog=function(){return"undefined"==typeof Lo[this.name]&&(Lo[this.name]={dialog:xo(this.getDialogTemplate())},O(Lo[this.name].dialog,xo.extend(this.getDefaultDialogOptions(this.name),this.dialogOptions))),Lo[this.name].instance=this,Lo[this.name].dialog},Un.prototype=Object.create(jn.prototype),Un.prototype.init=On.prototype.init,Un.prototype.selectionChange=On.prototype.selectionChange,Fn.prototype=Object.create(Nn.prototype),Fn.prototype.click=function(e){this.menu.getMenu().is(":visible")?xo(".raptor-menu").hide():this.menu.show(),e.preventDefault()},qn.prototype.init=function(){this.setOptions();var e=this.getButton().init();return e.addClass("raptor-menu-button"),e},qn.prototype.getButton=function(){return this.button||(this.button=new Fn(this)),this.button},qn.prototype.setOptions=function(){this.options.title=l(this.name+"Title"),this.options.icon="ui-icon-"+this.name},qn.prototype.getMenu=function(){return this.menu||(this.menu=xo("<div>").addClass("ui-menu ui-widget ui-widget-content ui-corner-all "+this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.menuContent).css("position","fixed").hide().mousedown(function(e){e.preventDefault()}).children().appendTo("body")),this.menu},qn.prototype.show=function(){xo(".raptor-menu").hide(),vt(this.getMenu().toggle(),this.getButton().getButton())
},xo("html").click(function(e){xo(e.target).hasClass("raptor-menu-button")||0!==xo(e.target).closest(".raptor-menu-button").length||xo(".raptor-menu").hide()}),qn.prototype.getMenu=function(){return this.menu||(this.menu=xo("<div>").addClass("ui-menu ui-widget ui-widget-content ui-corner-all "+this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.menuContent).css("position","fixed").hide().appendTo("body").mousedown(function(e){e.preventDefault()})),this.menu},zn.prototype=Object.create(qn.prototype),zn.prototype.menuItemMouseDown=function(e){e.preventDefault()},zn.prototype.menuItemClick=function(e){return S(this.button.button,xo(e.target).html()),xo(this.menu).closest("ul").hide(),!1},zn.prototype.menuItemMouseEnter=function(){},zn.prototype.menuItemMouseLeave=function(){},zn.prototype.getMenu=function(){return this.menu||(this.menu=xo("<ul>").addClass(this.options.baseClass+"-menu "+this.raptor.options.baseClass+"-menu").html(this.getMenuItems()).css("position","fixed").hide().find("a").mousedown(this.menuItemMouseDown.bind(this)).mouseenter(this.menuItemMouseEnter.bind(this)).mouseleave(this.menuItemMouseLeave.bind(this)).click(this.menuItemClick.bind(this)).end().appendTo("body"),I(this.menu)),this.menu},xo.extend(Io,{Button:Nn,CSSClassApplierButton:Hn,DialogButton:jn,DialogToggleButton:Un,FilteredPreviewButton:Ln,HoverPanelLayout:An,Menu:qn,MenuButton:Fn,PreviewButton:In,PreviewToggleButton:Mn,RaptorLayout:Sn,RaptorPlugin:Pn,SelectMenu:zn,TextAlignButton:ao,ToggleButton:On,ToolbarLayout:Rn,UiGroup:Dn,aButton:x,aButtonActive:B,aButtonDisable:A,aButtonEnable:D,aButtonInactive:N,aButtonIsEnabled:R,aButtonSetIcon:P,aButtonSetLabel:S,aDialog:O,aDialogClose:L,aDialogOpen:M,aMenu:I,aTabs:H,actionApply:q,actionPreview:U,actionPreviewRestore:F,actionRedo:W,actionUndo:z,clean:$,cleanEmptyAttributes:V,cleanEmptyElements:_,cleanRemoveComments:X,cleanReplaceElements:Q,cleanUnnestElement:J,cleanUnwrapElements:G,cleanWrapTextNodes:K,dockToElement:et,dockToScreen:Y,elementBringToTop:nt,elementChangeTag:Tt,elementClosestBlock:Ct,elementContainsBlockElement:st,elementDefaultDisplay:lt,elementDetachedManip:yt,elementFirstInvalidElementOfValidParent:ut,elementGetAttributes:dt,elementGetStyles:ht,elementIsBlock:rt,elementIsEmpty:bt,elementIsValid:ct,elementOuterHtml:ot,elementOuterText:at,elementPositionUnder:vt,elementRemoveAttributes:it,elementSwapStyles:ft,elementToggleStyle:mt,elementUniqueId:wt,elementVisibleRect:pt,elementWrapInner:gt,extendLocale:a,fragmentInsertBefore:xt,fragmentToHtml:Et,getLocalizedString:s,listBreakAtSelection:zt,listBreakByReplacingSelection:qt,listConvertItemsForList:Nt,listConvertListItem:It,listConvertListType:Ft,listEnforceValidChildren:At,listRemoveEmpty:Ht,listRemoveEmptyItems:Lt,listShouldConvertType:Dt,listShouldUnwrap:Pt,listShouldWrap:Rt,listTidyModified:Mt,listToggle:St,listUnwrap:Ot,listUnwrapSelectedListItems:jt,listUnwrapSelection:Ut,listWrapSelection:Bt,nodeFindParent:Wt,nodeFindTextNodes:Qt,nodeIsChildOf:Gt,persistGet:Xt,persistSet:Vt,rangeContainsNode:ai,rangeContainsNodeText:ri,rangeDeserialize:ci,rangeEmptyTag:Zt,rangeExpandTo:$t,rangeExpandToParent:_t,rangeGet:hi,rangeGetCommonAncestor:ii,rangeGetEndElement:ti,rangeGetStartElement:ei,rangeIsContainedBy:oi,rangeIsEmpty:ni,rangeReplace:Yt,rangeReplaceSplitInvalidTags:ui,rangeReplaceWithinValidTags:pi,rangeSelectElement:Kt,rangeSelectElementContent:Jt,rangeSerialize:li,rangeToHtml:di,rangeTrim:si,registerLocale:o,selectionAtEndOfElement:Ni,selectionAtStartOfElement:Ii,selectionChangeTags:$i,selectionClearFormatting:Gi,selectionConstrain:Qi,selectionContains:Yi,selectionDelete:Zi,selectionDestroy:fi,selectionEachBlock:zi,selectionEachRange:vi,selectionExists:Hi,selectionExpandTo:_i,selectionExpandToWord:Xi,selectionFindWrappingAndInnerElements:Ji,selectionGetElement:Di,selectionGetElements:Ri,selectionGetEndElement:Bi,selectionGetHtml:Pi,selectionGetStartElement:Ai,selectionInverseWrapWithTagClass:Vi,selectionIsEmpty:Oi,selectionRange:ji,selectionReplace:Ci,selectionReplaceSplittingSelectedElement:Ui,selectionReplaceWithinValidTags:Fi,selectionRestore:mi,selectionSave:gi,selectionSaved:bi,selectionSelectEdge:ki,selectionSelectEnd:Ei,selectionSelectInner:wi,selectionSelectOuter:Ti,selectionSelectStart:xi,selectionSelectToEndOfElement:Si,selectionSet:yi,selectionToggleBlockClasses:Wi,selectionToggleBlockStyle:qi,selectionToggleWrapper:Mi,selectionTrim:Ki,selectionWrapTagWithAttribute:Li,setLocale:r,stateRestore:tn,stateSave:en,stringCamelCaseConvert:on,stringHtmlStringIsEmpty:an,stringStripTags:nn,styleRestoreState:ln,styleSwapState:rn,styleSwapWithWrapper:sn,tableCanMergeCells:bn,tableCanSplitCells:yn,tableCellsInRange:fn,tableCreate:cn,tableDeleteColumn:pn,tableDeleteRow:hn,tableGetCellByIndex:mn,tableGetCellIndex:gn,tableInsertColumn:un,tableInsertRow:dn,tableMergeCells:vn,tableSplitCells:Cn,templateConvertTokens:f,templateGet:m,templateGetVariables:b,typeIsArray:C,typeIsElement:k,typeIsNode:w,typeIsNumber:v,typeIsRange:Tn,typeIsSelection:kn,typeIsString:y,typeIsTextNode:T,undockFromElement:tt,undockFromScreen:Z}),window.Raptor=Io,Io.globalDefaults={layouts:{},plugins:{},ui:{},bind:{},namespace:null,unify:!0,persistence:!0,persistenceName:"uiEditor",unloadWarning:!0,autoEnable:!1,partialEdit:!1,autoSelect:"end",enablePlugins:!0,disabledPlugins:[],enableUi:!0,disabledUi:[],replace:!1,replaceStyle:["display","position","float","width","padding-left","padding-right","padding-top","padding-bottom","margin-left","margin-right","margin-top","margin-bottom"],baseClass:"raptor",cssPrefix:"cms-",draggable:!0},Io.registerPreset({name:"full",plugins:{imageSwap:{chooser:"insertFile"}},layouts:{toolbar:{uiOrder:[["logo"],["save","cancel"],["dockToScreen","dockToElement","guides"],["viewSource"],["historyUndo","historyRedo"],["alignLeft","alignCenter","alignJustify","alignRight"],["textBold","textItalic","textUnderline","textStrike"],["textSuper","textSub"],["listUnordered","listOrdered"],["hrCreate","textBlockQuote"],["textSizeDecrease","textSizeIncrease","fontFamilyMenu"],["clearFormatting","cleanBlock"],["linkCreate","linkRemove"],["embed","insertFile"],["floatLeft","floatNone","floatRight"],["colorMenuBasic"],["tagMenu"],["classMenu"],["snippetMenu","specialCharacters"],["tableCreate","tableInsertRow","tableDeleteRow","tableInsertColumn","tableDeleteColumn"],["languageMenu"],["statistics"]]},hoverPanel:{uiOrder:[["clickButtonToEdit"]]},elementHoverPanel:{elements:"img",uiOrder:[["imageResize","imageSwap","close"]]}}},!0),Io.registerPreset({name:"micro",layouts:{toolbar:{uiOrder:[["logo"],["save","cancel"],["dockToScreen","dockToElement"],["historyUndo","historyRedo"],["specialCharacters"],["languageMenu"],["statistics"]]},hoverPanel:{uiOrder:[["clickButtonToEdit","revisions"]]}},plugins:{placeholder:!1,paste:{panels:["plain-text"]},noBreak:{enabled:!0}}}),Io.registerPreset({name:"inline",classes:"raptor-editing-inline",autoEnable:!0,draggable:!1,unify:!1,unloadWarning:!1,reloadOnDisable:!0,plugins:{unsavedEditWarning:!1,dock:{dockToElement:!0,docked:!0,persist:!1}},layouts:{toolbar:{uiOrder:[["textBold","textItalic","textUnderline","textStrike"],["colorMenuBasic"],["textBlockQuote"],["listOrdered","listUnordered"],["textSizeDecrease","textSizeIncrease"],["linkCreate","linkRemove"]]}}}),Io.registerPreset({name:"mammoth",plugins:{imageSwap:{chooser:"fileManager"}},layouts:{toolbar:{uiOrder:[["logo"],["save","cancel"],["dockToScreen","guides"],["viewSource"],["historyUndo","historyRedo"],["alignLeft","alignCenter","alignJustify","alignRight"],["textBold","textItalic","textUnderline","textStrike"],["textSuper","textSub"],["listUnordered","listOrdered"],["hrCreate","textBlockQuote"],["textSizeDecrease","textSizeIncrease"],["clearFormatting","cleanBlock"],["linkCreate","linkRemove"],["embed","fileManager"],["floatLeft","floatNone","floatRight"],["colorMenuBasic"],["tagMenu"],["classMenu"],["snippetMenu","specialCharacters","loremIpsum"],["tableCreate","tableInsertRow","tableDeleteRow","tableInsertColumn","tableDeleteColumn"]]},hoverPanel:{uiOrder:[["clickButtonToEdit","revisions"]]},elementHoverPanel:{elements:"img",uiOrder:[["imageResize","imageSwap","imageEditor","close"]]},imageEditor:{uiOrder:[["save","cancel"],["revert","upload"],["undo","redo"],["flipV","flipH","rotateLeft","rotateRight","resize","crop"]]},fileManager:{uiOrder:[["insert","rename","edit","delete","download","view"]]}}},!0),Io.registerPreset({name:"mammoth-inline",classes:"raptor-editing-inline",autoEnable:!0,draggable:!1,unify:!1,unloadWarning:!1,reloadOnDisable:!0,plugins:{unsavedEditWarning:!1,dock:{dockToElement:!0,docked:!0,persist:!1}},layouts:{toolbar:{uiOrder:[["viewSource","guides"],["historyUndo","historyRedo"],["alignLeft","alignCenter","alignJustify","alignRight"],["textBold","textItalic","textUnderline","textStrike"],["textSuper","textSub"],["listUnordered","listOrdered"],["hrCreate","textBlockQuote"],["textSizeDecrease","textSizeIncrease"],["clearFormatting","cleanBlock"],["linkCreate","linkRemove"],["embed","fileManager"],["floatLeft","floatNone","floatRight"],["colorMenuBasic"],["tagMenu"],["classMenu"],["snippetMenu","specialCharacters"],["tableCreate","tableInsertRow","tableDeleteRow","tableInsertColumn","tableDeleteColumn"]]}}}),Io.registerUi(new jn({name:"cancel",hotkey:"esc",dialogOptions:{width:500},action:function(){this.raptor.isDirty()?jn.prototype.action.call(this):this.applyAction()},applyAction:function(){this.raptor.cancelEditing()},getDialogTemplate:function(){return xo("<div>").html(l("cancelDialogContent"))}})),Wn.prototype=Object.create(zn.prototype),Wn.prototype.init=function(){var e=zn.prototype.init.call(this);return"object"==typeof this.options.classes&&Object.keys(this.options.classes).length>0?(this.raptor.bind("selectionChange",this.updateButton.bind(this)),e):void 0},Wn.prototype.changeClass=function(e){Wi(e,[],this.raptor.getElement())},Wn.prototype.menuItemClick=function(e){zn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeClass([xo(e.currentTarget).data("value")])}.bind(this))},Wn.prototype.menuItemMouseEnter=function(e){this.raptor.actionPreview(function(){this.changeClass([xo(e.currentTarget).data("value")])}.bind(this))},Wn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Wn.prototype.updateButton=function(){},Wn.prototype.getMenuItems=function(){var e="";for(var t in this.options.classes)e+=this.raptor.getTemplate("class-menu.item",{label:t,value:this.options.classes[t]});return e},Io.registerUi(new Wn),Io.registerUi(new In({name:"cleanBlock",action:function(){this.raptor.getElement().find("[style]").removeAttr("style"),this.raptor.getElement().find("span:empty").remove()}})),Io.registerUi(new In({name:"clearFormatting",action:function(){Gi(this.raptor.getElement().get(0)),_(this.raptor.getElement(),["a","b","i","sub","sup","strong","em","big","small","p"]),K(this.raptor.getElement()[0],"p")}})),Io.registerUi(new Nn({name:"clickButtonToEdit",action:function(){this.raptor.enableEditing()}})),Io.registerUi(new Nn({name:"close",click:function(){this.layout.close()}})),Qn.prototype=Object.create(zn.prototype),Qn.prototype.init=function(){return this.raptor.bind("selectionChange",this.updateButton.bind(this)),this.updateButton(),zn.prototype.init.apply(this,arguments)},Qn.prototype.updateButton=function(){var e=Ri()[0],t=this.getButton().getButton(),i=null,n=null;if(S(t,l("colorMenuBasicAutomatic")),P(t,!1),e){e=xo(e);for(var o=0;o<this.colors.length;o++)if(n=xo(e).closest("."+this.options.cssPrefix+this.colors[o]),n.length){i=this.colors[o];break}return i?(S(t,l("colorMenuBasic"+(i.charAt(0).toUpperCase()+i.slice(1)))),P(t,"ui-icon-swatch"),t.find(".ui-icon").css("background-color",n.css("color")),void 0):void 0}},Qn.prototype.changeColor=function(e,t){t&&(this.currentColor=e),this.raptor.actionApply(function(){if(Xi(),"automatic"===e)Ri().parents("."+this.options.cssPrefix+"color").addBack().each(function(){var e=xo(this).attr("class");if(null!==e&&"undefined"!=typeof e&&(e=e.match(/(cms-(.*?))( |$)/gi),null!==e&&"undefined"!=typeof e))for(var t=0,i=e.length;i>t;t++)xo(this).removeClass(xo.trim(e[t]))});else{var t=wt();Mi("span",{classes:this.options.cssPrefix+"color "+this.options.cssPrefix+e,attributes:{id:t}});var i=xo("#"+t);if(i.length){wi(i.removeAttr("id").get(0));var n;do n=xo("#"+t),n.removeAttr("id");while(n.length)}}}.bind(this))},Qn.prototype.menuItemMouseEnter=function(e){this.raptor.actionPreview(function(){this.changeColor(xo(e.currentTarget).data("color"))}.bind(this))},Qn.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},Qn.prototype.menuItemClick=function(e){zn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeColor(xo(e.currentTarget).data("color"),!0)}.bind(this))},Qn.prototype.getMenuItems=function(){return this.raptor.getTemplate("color-menu-basic.menu",this.options)},Io.registerUi(new Qn),Gn.prototype=Object.create(Pn.prototype),Gn.prototype.init=function(){var e;this.options.persist&&(e=this.raptor.persist("docked")),"undefined"==typeof e&&(e=this.options.docked),"undefined"==typeof e&&(e=!1),e&&(this.raptor.bind("toolbarReady",function(){e&&this.toggleState()}.bind(this)),this.raptor.bind("toolbarHide",function(){this.dockState&&this.dockState.spacer&&(this.dockState.spacer.addClass(this.options.baseClass+"-hidden"),this.dockState.spacer.removeClass(this.options.baseClass+"-visible"))}.bind(this)),this.raptor.bind("toolbarShow",function(){this.dockState&&this.dockState.spacer&&(this.dockState.spacer.removeClass(this.options.baseClass+"-hidden"),this.dockState.spacer.addClass(this.options.baseClass+"-visible"))}.bind(this)),this.raptor.bind("toolbarDestroy",function(){this.dockState&&this.dockState.spacer&&this.dockState.spacer.remove()}.bind(this)))},Gn.prototype.toggleState=function(){return this.options.dockToElement?this.toggleDockToElement():this.toggleDockToScreen()},Gn.prototype.toggleDockToElement=function(){this.dockState?"undefined"!=typeof this.dockState.dockedTo?this.undockFromElement():(this.undockFromScreen(),this.dockToElement()):this.dockToElement()},Gn.prototype.dockToElement=function(){var e=this.raptor.getElement(),t=this.raptor.getLayout("toolbar").getElement();this.marker=xo("<marker>").addClass(this.options.baseClass+"-marker").insertAfter(t),this.raptor.getLayout("toolbar").getElement().addClass(this.options.baseClass+"-docked-to-element"),this.dockState=et(this.raptor.getLayout("toolbar").getElement(),e,{position:this.options.position,spacer:!1,wrapperClass:this.options.baseClass+"-inline-wrapper"}),this.activateButton(this.raptor.getPlugin("dockToElement"))},Gn.prototype.undockFromElement=function(){this.marker.replaceWith(tt(this.dockState)),this.dockState=null,this.raptor.getLayout("toolbar").getElement().removeClass(this.options.baseClass+"-docked-to-element"),this.deactivateButton(this.raptor.getPlugin("dockToElement"))},Gn.prototype.toggleDockToScreen=function(){this.dockState?"undefined"!=typeof this.dockState.dockedTo?(this.undockFromElement(),this.dockToScreen()):this.undockFromScreen():this.dockToScreen()},Gn.prototype.dockToScreen=function(){if(!this.dockState){var e=this.raptor.getLayout("toolbar");if(e.isReady()){this.raptor.persist("docked",!0);var t=e.getElement();this.marker=xo("<marker>").addClass(this.options.baseClass+"-marker").insertAfter(t),t.addClass(this.options.baseClass+"-docked"),e.disableDragging(),this.dockState=Y(t,{position:this.options.position,spacer:this.options.spacer,under:this.options.under}),e.isVisible()||(this.dockState.spacer.removeClass(this.options.baseClass+"-visible"),this.dockState.spacer.addClass(this.options.baseClass+"-hidden")),this.activateButton(this.raptor.getPlugin("dockToScreen"))}}},Gn.prototype.undockFromScreen=function(){if(this.dockState){this.raptor.persist("docked",!1);var e=this.raptor.getLayout("toolbar"),t=Z(this.dockState);this.marker.replaceWith(t),e.enableDragging(),e.constrainPosition(),this.dockState=null,t.removeClass(this.options.baseClass+"-docked"),this.deactivateButton(this.raptor.getPlugin("dockToScreen"))}},Gn.prototype.deactivateButton=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.button&&N(e.button)},Gn.prototype.activateButton=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.button&&B(e.button)},Io.registerPlugin(new Gn),Io.registerUi(new Nn({name:"dockToScreen",action:function(){this.raptor.unify(function(e){e.plugins.dock.toggleDockToScreen()})}})),Io.registerUi(new Nn({name:"dockToElement",action:function(){this.raptor.unify(function(e){e.plugins.dock.toggleDockToElement()})}})),Io.registerUi(new jn({name:"embed",state:null,dialogOptions:{width:600,height:400},applyAction:function(e){this.raptor.actionApply(function(){Ci(e.find("textarea").val())})},getDialogTemplate:function(){var e=xo("<div>").html(this.raptor.getTemplate("embed.dialog",this.options));e.find("textarea").change(function(t){e.find("."+this.options.baseClass+"-preview").html(xo(t.target).val())}.bind(this));var t=e.find("."+this.options.baseClass+"-panel-tabs");return t.find("li").click(function(){t.find("ul li").removeClass("ui-state-active").removeClass("ui-tabs-selected"),xo(this).addClass("ui-state-active").addClass("ui-tabs-selected"),t.children("div").hide().eq(xo(this).index()).show()}),e}})),Io.registerUi(new Ln({name:"floatLeft",applyToElement:function(e){e.removeClass(this.options.cssPrefix+"float-right"),e.toggleClass(this.options.cssPrefix+"float-left"),V(e,["class"])},getElement:function(e){var t=xo(e.commonAncestorContainer).find("img");return t.length?t:null}})),Io.registerUi(new Ln({name:"floatNone",applyToElement:function(e){e.removeClass(this.options.cssPrefix+"float-right"),e.removeClass(this.options.cssPrefix+"float-left"),V(e,["class"])},getElement:function(e){var t=xo(e.commonAncestorContainer).find("img");return t.length?t:null}})),Io.registerUi(new Ln({name:"floatRight",applyToElement:function(e){e.removeClass(this.options.cssPrefix+"float-left"),e.toggleClass(this.options.cssPrefix+"float-right"),V(e,["class"])},getElement:function(e){var t=xo(e.commonAncestorContainer).find("img");return t.length?t:null}})),Io.registerUi(new In({name:"guides",action:function(){this.raptor.getElement().toggleClass(this.getClassName()),this.updateButtonState()},updateButtonState:function(){this.raptor.getElement().hasClass(this.getClassName())?B(this.button):N(this.button)},init:function(){return this.raptor.bind("cancel",this.removeClass.bind(this)),this.raptor.bind("saved",this.removeClass.bind(this)),In.prototype.init.call(this)},removeClass:function(){this.raptor.getElement().removeClass(this.getClassName())},getClassName:function(){return this.options.baseClass+"-visible"},mouseEnter:function(){In.prototype.mouseEnter.call(this),this.updateButtonState()},mouseLeave:function(){In.prototype.mouseLeave.call(this),this.updateButtonState()}})),Io.registerUi(new Nn({name:"historyRedo",hotkey:["ctrl+y","ctrl+shift+z"],action:function(){this.raptor.historyForward()},init:function(){return this.raptor.bind("historyChange",this.historyChange.bind(this)),Nn.prototype.init.apply(this,arguments),A(this.button),this.button},historyChange:function(){this.raptor.present<this.raptor.history.length-1?D(this.button):A(this.button)}})),Io.registerUi(new Nn({name:"historyUndo",hotkey:"ctrl+z",action:function(){this.raptor.historyBack()},init:function(){return this.raptor.bind("historyChange",this.historyChange.bind(this)),Nn.prototype.init.apply(this,arguments),A(this.button),this.button},historyChange:function(){0===this.raptor.present?A(this.button):D(this.button)}})),Io.registerUi(new In({name:"hrCreate",action:function(){Ci("<hr/>")}})),Io.registerUi(new jn({name:"imageResize",proportional:!0,image:null,dialogOptions:{width:450},action:function(){var e=this.getDialog();this.image=c(this.layout.target),this.originalWidth=this.layout.target.width,this.originalHeight=this.layout.target.height,e.find("[name=width]").val(this.layout.target.width),e.find("[name=height]").val(this.layout.target.height),this.openDialog()},applyAction:function(){var e=this.getDialog(),t=e.find("[name=width]").val(),i=e.find("[name=height]").val();this.raptor.actionApply(function(){xo("#"+this.image).css({width:t,height:i}).attr("width",t).attr("height",i),Ti(xo("#"+this.image)[0])}.bind(this))},getDialogTemplate:function(){var e=xo("<div>").html(this.raptor.getTemplate("image-resize.dialog",this.options)),t=this;e.find("."+this.options.baseClass+"-lock-proportions").hover(function(){xo(this).addClass("ui-state-hover")},function(){xo(this).removeClass("ui-state-hover")}).click(function(){Lo[t.name].instance.proportional=!Lo[t.name].instance.proportional,xo(this).find(".ui-icon").toggleClass("ui-icon-locked",t.proportional).toggleClass("ui-icon-unlocked",!t.proportional)});var i=e.find("[name=width]"),n=e.find("[name=height]");return i.on("input.raptor",function(){var e=parseInt(xo(this).val());isNaN(e)||Lo[t.name].instance.proportional&&n.val(Math.round(Math.abs(Lo[t.name].instance.originalHeight/Lo[t.name].instance.originalWidth*e)))}),n.on("input.raptor",function(){var e=parseInt(xo(this).val());isNaN(e)||Lo[t.name].instance.proportional&&i.val(Math.round(Math.abs(Lo[t.name].instance.originalWidth/Lo[t.name].instance.originalHeight*e)))}),e}})),Io.registerUi(new Nn({name:"imageSwap",chooser:null,click:function(){Ti(this.layout.target),this.raptor.getPlugin(this.options.chooser).action(this.layout.target)}})),Io.registerUi(new jn({name:"insertFile",state:!1,imageTypes:["jpeg","jpg","png","gif"],options:{customAction:!1},action:function(e){return this.options.customAction&&this.options.customAction.call(this,e)!==!1?void 0:("undefined"!=typeof e?(this.getDialog().find("[name=location]").val(e.getAttribute("src")||e.getAttribute("href")),this.getDialog().find("[name=name]").val(e.innerHTML)):(this.getDialog().find("[name=location]").val(""),this.getDialog().find("[name=name]").val("")),this.openDialog())},applyAction:function(){var e=this.getDialog(),t=e.find("[name=location]").val(),i=e.find("[name=name]").val();this.raptor.actionApply(function(){this.insertFiles([{location:t,name:i}])}.bind(this))},getDialogTemplate:function(){return xo(this.raptor.getTemplate("insert-file.dialog"))},getFileType:function(e){if("undefined"!=typeof e.extension)return e.extension.toLowerCase();var t=e.location.split(".");return t.length>0?t.pop().toLowerCase():"unknown"},isImage:function(e){return-1!==xo.inArray(this.getFileType(e),this.imageTypes)},insertFiles:function(e){this.raptor.resume(),e.length&&this.raptor.actionApply(function(){1===e.length?this.isImage(e[0])&&xo(Pi()).is("img")||Oi()?this.replaceFiles(e):this.linkFiles(e):this.linkFiles(e)}.bind(this))},linkFiles:function(e){_i("a",this.raptor.getElement()),Ki();var t=rangy.createApplier({tag:"a",attributes:{href:e[0].location.replace(/([^:])\/\//g,"$1/"),title:e[0].name,"class":this.options.cssPrefix+"file "+this.options.cssPrefix+this.getFileType(e[0])}});t.applyToSelection()},replaceFiles:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.prepareElement(e[i]));Ci(t.join(", "))},prepareElement:function(e,t){return this.isImage(e)?this.prepareImage(e,this.options.cssPrefix+this.getFileType(e),t):this.prepareAnchor(e,this.options.cssPrefix+"file "+this.options.cssPrefix+this.getFileType(e),t)},prepareImage:function(e,t,i){return xo("<div/>").html(xo("<img/>").attr({src:e.location.replace(/([^:])\/\//g,"$1/"),title:i||e.name,"class":t})).html()},prepareAnchor:function(e,t,i){return xo("<div/>").html(xo("<a/>").attr({href:e.location.replace(/([^:])\/\//g,"$1/"),title:e.name,"class":t}).html(i||e.name)).html()}}));var Ho,jo,Uo,Fo;Io.registerUi(new Un({name:"linkCreate",dialogOptions:{width:850},applyAction:function(){this.raptor.actionApply(function(){Xi(),_i("a",this.raptor.getElement()),Ki();var e=rangy.createApplier({tag:"a",attributes:Fo});Fo!==!1&&""!==xo.trim(Fo.href)&&(e.applyToSelection(),_(this.raptor.getElement(),["a"]))}.bind(this))},openDialog:function(){var e=Di();if(e.is("a"))for(var t=0,i=jo.length;i>t;t++){var n=jo[t].updateInputs(e,Uo.children("div:eq("+t+")"));n&&Ho.find(":radio:eq("+t+")").trigger("click")}Un.prototype.openDialog.call(this)},validateDialog:function(){var e=Ho.find(":radio:checked").val();return Fo=jo[e].getAttributes(Uo.children("div:eq("+e+")")),Fo!==!1},selectionToggle:function(){var e=Di();return e?e.closest("a").length?!0:!1:!1},getDialogTemplate:function(){var e=xo(this.raptor.getTemplate("link.dialog",this.options));Ho=e.find("[data-menu]"),Uo=e.find("[data-content]"),jo=[new Kn(this.raptor),new _n(this.raptor),new Vn(this.raptor),new Xn(this.raptor)];for(var t=0,i=jo.length;i>t;t++)xo(this.raptor.getTemplate("link.label",jo[t])).click(function(){Uo.children("div").hide(),Uo.children("div:eq("+xo(this).index()+")").show()}).find(":radio").val(t).end().appendTo(Ho),xo("<div>").append(jo[t].getContent()).hide().appendTo(Uo);return Ho.find(":radio:first").prop("checked",!0),Uo.children("div:first").show(),e}})),Io.registerUi(new Mn({name:"linkRemove",disable:!0,action:function(){this.raptor.actionApply(function(){var e=rangy.createApplier({tag:"a"});Xi(),this.raptor.selectionConstrain(),e.undoToSelection(),_(this.raptor.getElement(),["a"])}.bind(this))},selectionToggle:function(){var e=Di();return e?e.closest("a").length?!0:!1:!1}})),Vn.prototype=Object.create(_n.prototype),Vn.prototype.getContent=function(){return this.raptor.getTemplate("link.document",this.raptor.options)},Xn.prototype.getContent=function(){return this.raptor.getTemplate("link.email",this.raptor.options)},Xn.prototype.getAttributes=function(e){var t=e.find("[name=email]").val(),i=e.find("[name=subject]").val();return xo.trim(i)&&(i="?Subject="+encodeURIComponent(i)),""===xo.trim(t)?!1:{href:"mailto:"+t+i}},Xn.prototype.updateInputs=function(e,t){var i=!1;if(email="",subject="",href=e.attr("href"),0===href.indexOf("mailto:")){var n=href.indexOf("?Subject=");n>0?(email=href.substring(7,n),subject=href.substring(n+9)):(email=href.substring(7),subject=""),i=!0}return t.find("[name=email]").val(email),t.find("[name=subject]").val(subject),i},_n.prototype.getContent=function(){return this.raptor.getTemplate("link.external",this.raptor.options)},_n.prototype.getAttributes=function(e){var t=e.find("[name=location]").val(),i=e.find("[name=blank]").is(":checked"),n={href:t};return i&&(n.target="_blank"),"http://"===xo.trim(n.href)?!1:n},_n.prototype.updateInputs=function(e,t){var i=!1,n=e.attr("href");return 0===n.indexOf("http://")?(t.find("[name=location]").val(n),i=!0):t.find("[name=location]").val("http://"),"_blank"===e.attr("target")?t.find("[name=blank]").prop("checked",!0):t.find("[name=blank]").prop("checked",!1),i},Kn.prototype.getContent=function(){return this.raptor.getTemplate("link.internal",{baseClass:this.raptor.options.baseClass,domain:window.location.protocol+"//"+window.location.host})},Kn.prototype.getAttributes=function(e){var t=e.find("[name=location]").val(),i=e.find("[name=blank]").is(":checked"),n={href:t};return i&&(n.target="_blank"),n},Kn.prototype.updateInputs=function(e,t){var i=e.attr("href");return-1===i.indexOf("http://")&&-1===i.indexOf("mailto:")?t.find("[name=location]").val(i):t.find("[name=location]").val(""),"_blank"===e.attr("target")?t.find("[name=blank]").prop("checked",!0):t.find("[name=blank]").prop("checked",!1),!1},Io.registerUi(new Nn({name:"listOrdered",action:function(){document.execCommand("insertorderedlist")}})),Io.registerUi(new Nn({name:"listUnordered",action:function(){document.execCommand("insertunorderedlist")}})),Io.registerUi(new Nn({name:"logo",init:function(){var e=Nn.prototype.init.apply(this,arguments);return e.find(".ui-button-icon-primary").css({"background-image":"url(//www.raptor-editor.com/logo/VERSION?json="+encodeURIComponent(JSON.stringify(this.raptor.options))+")"}),e},action:function(){window.open("http://www.raptor-editor.com/about/VERSION","_blank")}})),Jn.prototype=Object.create(Pn.prototype),Jn.prototype.init=function(){this.raptor.getElement().on("keypress.raptor",this.preventReturn.bind(this)),this.raptor.getElement().on("drop.raptor",this.preventDrop.bind(this))},Jn.prototype.preventReturn=function(e){return this.options.enabled&&13===e.which?!1:void 0},Jn.prototype.preventDrop=function(){return this.options.enabled},Io.registerPlugin(new Jn),$n.prototype=Object.create(Pn.prototype),$n.prototype.init=function(){this.raptor.registerHotkey("return",this.returnPressed.bind(this)),this.raptor.registerHotkey("shift+return",this.shiftReturnPressed.bind(this))},$n.prototype.returnPressedList=function(e){var t=e.closest("li");if(!t.length)return!1;var i=t.closest("ul, ol"),n=i.get(0).tagName.toLowerCase(),o=!1;if(bt(t)){var a=t.next();a.length&&a.is("li")?(o=qt(n,"li",this.raptor.getElement(),"<p>&nbsp;</p>"),o&&wi(o.get(0))):(t.remove(),wi(xo("<p>&nbsp;</p>").insertAfter(i).get(0)))}else o=zt(n,"li",this.raptor.getElement()),o&&xi(o.get(0));return!0},$n.prototype.returnPressed=function(){var e=Di();return this.returnPressedList(e)?!0:!1},$n.prototype.shiftReturnPressedList=function(e){if(e.closest("li").length){var t=e.closest("ul, ol").get(0).tagName.toLowerCase(),i=qt(t,"li",this.raptor.getElement(),"<p>&nbsp;</p>");return i&&wi(i.get(0)),!0}return!1},$n.prototype.shiftReturnPressed=function(){var e=Di();return this.shiftReturnPressedList(e)?!0:!1},Io.registerPlugin(new $n);var qo=!1,zo=null,Wo=null,Qo=null;Yn.prototype=Object.create(Pn.prototype),Yn.prototype.enable=function(){this.raptor.getElement().on("paste.raptor",this.capturePaste.bind(this))},Yn.prototype.capturePaste=function(){return Qo?void 0:qo?!1:(gi(),qo=!0,xo(".raptorPasteBin").remove(),xo('<div class="raptorPasteBin" contenteditable="true" style="width: 1px; height: 1px; overflow: hidden; position: fixed; top: -1px;" />').appendTo("body"),xo(".raptorPasteBin").focus(),window.setTimeout(this.showPasteDialog.bind(this),0),!0)},Yn.prototype.showPasteDialog=function(){M(this.getDialog(this))},Yn.prototype.pasteContent=function(e){this.raptor.actionApply(function(){var t=wt();mi(),e=this.filterAttributes(e),e=this.filterChars(e),Ci(xo('<placeholder id="'+t+'">'+e+"</placeholder>")),xo(".raptorPasteBin").remove();var i=xo("#"+t);wi(i.get(0)),gi(),i.contents().unwrap(),mi()}.bind(this))},Yn.prototype.getDialog=function(e){if(Wo=e,!zo){zo=xo("<div>").html(this.raptor.getTemplate("paste.dialog",this.options));for(var t=0,i=this.options.panels.length;i>t;t++)zo.find("."+this.options.baseClass+"-tab-"+this.options.panels[t]).css("display",""),0===t&&zo.find("."+this.options.baseClass+"-content-"+this.options.panels[t]).css("display","");zo.find("."+this.options.baseClass+"-panel-tabs > div:visible:not(:first)").hide(),O(zo,{modal:!0,resizable:!0,autoOpen:!1,width:800,height:500,title:l("pasteDialogTitle"),dialogClass:this.options.baseClass+"-dialog",close:function(){qo=!1},buttons:[{text:l("pasteDialogOKButton"),click:function(){var e=null,t=zo.find("."+this.options.baseClass+"-area:visible");e=t.hasClass(this.options.baseClass+"-plain")||t.hasClass(this.options.baseClass+"-source")?t.val():t.html(),L(zo),Wo.pasteContent(e)}.bind(this),icons:{primary:"ui-icon-circle-check"}},{text:l("pasteDialogCancelButton"),click:function(){fi(),xo(".raptorPasteBin").remove(),L(zo)},icons:{primary:"ui-icon-circle-close"}}]});var n=zo.find("."+this.options.baseClass+"-panel-tabs");n.find("li").click(function(){n.find("ul li").removeClass("ui-state-active").removeClass("ui-tabs-selected"),xo(this).addClass("ui-state-active").addClass("ui-tabs-selected"),n.children("div").hide().eq(xo(this).index()).show()})}return this.updateAreas(),zo},Yn.prototype.filterAttributes=function(e){var t=[{regexp:/(<meta\s*[^>]*\s*>)|(<\s*link\s* href="file:[^>]*\s*>)|(<\/?\s*\w+:[^>]*\s*>)/gi,handler:""},{regexp:/(class="Mso[^"]*")|(<!--(.|\s){1,}?-->)/gi,handler:""},{regexp:/(class="Apple-(style|converted)-[a-z]+\s?[^"]+")/,handle:""},{regexp:/id="internal-source-marker_[^"]+"|dir="[rtl]{3}"/,handle:""},{regexp:/(<p[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/p[^>]*>)|(<p[^>]*>\s*<font[^>]*>\s*(\&nbsp;|\u00A0)*\s*<\/\s*font\s*>\s<\/p[^>]*>)/gi,handler:""},{regexp:/(style="[^"]*mso-[^;][^"]*")|(style="margin:\s*[^;"]*;")/gi,handler:""},{regexp:/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,handler:""},{regexp:/(<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>)|(<\s*script\b([^<>]|\s)*>?)|(<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>)/gi,handler:""}];
return xo.each(t,function(t,i){e=e.replace(i.regexp,i.handler)}),e},Yn.prototype.filterChars=function(e){var t=e;return t=t.replace(/[\u2018|\u2019|\u201A]/g,"'"),t=t.replace(/[\u201C|\u201D|\u201E]/g,'"'),t=t.replace(/\u2026/g,"..."),t=t.replace(/[\u2013|\u2014]/g,"-"),t=t.replace(/\u02C6/g,"^"),t=t.replace(/\u2039/g,"<"),t=t.replace(/\u203A/g,">"),t=t.replace(/[\u02DC|\u00A0]/g," ")},Yn.prototype.stripAttributes=function(e){e=xo("<div/>").html(e);var t=this.options.allowedAttributes;return xo(e.find("*")).each(function(){var e=[];xo.each(this.attributes,function(i,n){-1===xo.inArray(n.nodeName,t)&&e.push(n.nodeName)});for(var i=0;i<e.length;i++)xo(this).attr(e[i],null)}),e.html()},Yn.prototype.stripEmpty=function(e){var t=xo("<div/>").html(e),i=this.options.allowedEmptyTags;return t.find("*").filter(function(){return-1!==xo.inArray(this.tagName.toLowerCase(),i)?!1:xo(this).find(i.join(",")).length?!1:""===xo.trim(xo(this).text())}).remove(),t.html()},Yn.prototype.stripSpans=function(e){var t=xo("<div/>").html(e);return t.find("span").each(function(){this.attributes.length||xo(this).replaceWith(xo(this).html())}),t.html()},Yn.prototype.updateAreas=function(){var e=xo(".raptorPasteBin").html();e=this.filterAttributes(e),e=this.filterChars(e),e=this.stripEmpty(e),e=this.stripAttributes(e),e=this.stripSpans(e),e=nn(e,this.options.allowedTags);var t=xo("<div/>").html(xo(".raptorPasteBin").html()).text(),i=xo(".raptorPasteBin").html();zo.find("."+this.options.baseClass+"-plain").val(xo("<div/>").html(t).text()),zo.find("."+this.options.baseClass+"-rich").html(e),zo.find("."+this.options.baseClass+"-source").html(i),zo.find("."+this.options.baseClass+"-markup").html(e)},xo(document).on("keyup.raptor keydown.raptor",function(e){Qo=e.shiftKey}),Io.registerPlugin(new Yn),Zn.prototype=Object.create(Pn.prototype),Zn.prototype.init=function(){this.raptor.bind("enabled",this.enabled.bind(this)),this.raptor.bind("change",this.check.bind(this))},Zn.prototype.enabled=function(){this.check(this.raptor.getHtml())},Zn.prototype.check=function(e){if(e=e.trim(),!e||"<br>"===e||"<div><br></div>"===e){var t=this.raptor.getNode(),i=document.createElement(this.options.tag);i.innerHTML=this.options.content,t.innerHTML="",t.appendChild(i),this.options.select&&wi(t.childNodes[0]),this.raptor.checkChange()}},Io.registerPlugin(new Zn),Io.registerUi(new Nn({name:"save",action:function(){this.getPlugin()?this.getPlugin().save():j({text:l("saveNotConfigured"),type:"error"})},init:function(){if(null!==this.options.plugin){var e=Nn.prototype.init.apply(this,arguments);return this.getPlugin()||t("Cannot find save plugin for UI."),this.raptor.bind("dirty",this.dirty.bind(this)),this.raptor.bind("cleaned",this.clean.bind(this)),this.clean(),e}},getPlugin:function(){return this.raptor.getPlugin(this.options.plugin)},dirty:function(){D(this.button)},clean:function(){A(this.button)}})),eo.prototype=Object.create(zn.prototype),eo.prototype.init=function(){var e=zn.prototype.init.call(this);return"undefined"!=typeof this.options.snippets&&Object.keys(this.options.snippets).length>0?e:void 0},eo.prototype.insertSnippet=function(e){Ci(this.options.snippets[e])},eo.prototype.menuItemMouseDown=function(e){this.raptor.actionApply(function(){this.insertSnippet(xo(e.currentTarget).data("name"))}.bind(this))},eo.prototype.menuItemMouseEnter=function(e){this.raptor.actionPreview(function(){this.insertSnippet(xo(e.currentTarget).data("name"))}.bind(this))},eo.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},eo.prototype.getMenuItems=function(){var e="";for(var t in this.options.snippets)e+=this.raptor.getTemplate("snippet-menu.item",{name:t});return e},Io.registerUi(new eo);var Go=!1;Io.registerUi(new jn({name:"specialCharacters",dialogOptions:{width:645},options:{setOrder:["symbols","mathematics","arrows","greekAlphabet"],characterSets:{symbols:{name:l("specialCharactersSymbols"),characters:[["<","&lt;","less than"],[">","&gt;","greater than"],["&","&amp;","ampersand"],['"',"&quot;","quotation mark"],["&nbsp;","non-breaking space: ' '"],["&emsp;","em space: '  '"],["&ensp;","en space: ' '"],["&thinsp;","thin space: ''"],["&mdash;","em dash"],["&ndash;","en dash"],["&minus;","minus"],["-","hyphen"],["&oline;","overbar space"],["&cent;","cent"],["&pound;","pound"],["&euro;","euro"],["&sect;","section"],["&dagger;","dagger"],["&Dagger;","double dagger"],["&lsquo;","left single quotes"],["&rsquo;","right single quotes"],["'","single quotes"],["&#x263a;","smiley face"],["&#x2605;","black star"],["&#x2606;","white star"],["&#x2610;","check box"],["&middot;","middle dot"],["&bull;","bullet"],["&copy;","copyright"],["&reg;","registered"],["&trade;","trade"],["&iquest;","inverted question mark"],["&iexcl;","inverted exclamation mark"],["&Aring;","Angstrm"],["&hellip;","ellipsis"],["&#x2295;","earth"],["&#x2299;","sun"],["&#x2640;","female"],["&#x2642;","male"],["&clubs;","clubs or shamrock"],["&spades;","spades"],["&hearts;","hearts or valentine"],["&diams;","diamonds"],["&loz;","diamond"]]},mathematics:{name:l("specialCharactersMathematics"),characters:[["&lt;","less than"],["&le;","less than or equal to"],["&gt;","greater than"],["&ge;","greater than or equal to"],["&ne;","not equal"],["&asymp;","approximately equal to"],["&equiv;","identically equal to"],["&cong;","congruent to"],["&prop;","proportional"],["&there4;","therefore"],["&sum;","summation"],["&prod;","product"],["&prime;","prime or minutes"],["&Prime;","double prime or seconds"],["&Delta;","delta"],["&nabla;","del"],["&part;","partial"],["&int;","integral"],["&middot;","middle dot"],["&sdot;","dot operator"],["&bull;","bullet"],["&minus;","minus sign"],["&times;","multipllcation sign"],["&divide;","division sign"],["&frasl;","fraction slash, (ordinary / \\)"],["&plusmn;","plus or minus"],["&deg;","degree sign"],["&lfloor;","floor function"],["&rfloor;","floor function"],["&lceil;","ceiling function"],["&rceil;","ceiling function"],["&lowast;","asterisk operator, (ordinary *)"],["&oplus;","circled plus"],["&otimes;","circled times"],["&ordm;","masculine ordinal"],["&lang;","bra"],["&rang;","ket"],["&infin;","infinity"],["&pi;","pi"],["&frac12;","half"],["&alefsym;","aleph"],["&radic;","radical"],["&ang;","angle"],["&perp;","perpendicular"],["&real;","real"],["&isin;","is an element of"],["&notin;","not an element of"],["&empty;","null set"],["&sub;","subset of"],["&sube;","subset or or equal to"],["&nsub;","not a subset"],["&cap;","intersection"],["&cup;","union"],["&sim;","tilde operator (ordinary ~)"],["&Oslash;","slash O"],["&and;","logical and"],["&Lambda;","lambda (and)"],["&or;","logical or"],["&not;","not sign"],["&sim;","tilde operator (ordinary ~)"],["&rarr;","right arrow"],["&rArr;","double right arrow"],["&larr;","left arrow"],["&lArr;","left double arrow"],["&harr;","left right arrow"],["&hArr;","left right double arrow"]]},arrows:{name:l("specialCharactersArrows"),characters:[["&darr;","down arrow"],["&dArr;","down double arrow"],["&uarr;","up arrow"],["&uArr;","up double arrow"],["&crarr;","arriage return arrow"],["&rarr;","right arrow"],["&rArr;","double right arrow"],["&larr;","left arrow"],["&lArr;","left double arrow"],["&harr;","left right arrow"],["&hArr;","left right double arrow"]]},greekAlphabet:{name:l("specialCharactersGreekAlphabet"),characters:[["&alpha;","alpha"],["&beta;","beta"],["&gamma;","gamma"],["&delta;","delta"],["&epsilon;","epsilon"],["&zeta;","zeta"],["&eta;","eta"],["&theta;","theta"],["&iota;","iota"],["&kappa;","kappa"],["&lambda;","lambda"],["&mu;","mu"],["&nu;","nu"],["&xi;","xi"],["&omicron;","omicron"],["&pi;","pi"],["&rho;","rho"],["&sigma;","sigma"],["&tau;","tau"],["&upsilon;","upsilon"],["&phi;","phi"],["&chi;","chi"],["&psi;","psi"],["&omega;","omega"],["&Alpha;","alpha"],["&Beta;","beta"],["&Gamma;","gamma"],["&Delta;","delta"],["&Epsilon;","epsilon"],["&Zeta;","zeta"],["&Eta;","eta"],["&Theta;","theta"],["&Iota;","iota"],["&Kappa;","kappa"],["&Lambda;","lambda"],["&Mu;","mu"],["&Nu;","nu"],["&Xi;","xi"],["&Omicron;","omicron"],["&Pi;","pi"],["&Rho;","rho"],["&Sigma;","sigma"],["&Tau;","tau"],["&Upsilon;","upsilon"],["&Phi;","phi"],["&Chi;","chi"],["&Psi;","psi"],["&Omega;","omega"]]}}},applyAction:function(){this.raptor.actionApply(function(){Go&&Ci(Go),Go=!1})},getDialogTemplate:function(){for(var e,t,i,n,o=xo(this.raptor.getTemplate("special-characters.dialog")).appendTo("body").hide(),a=0;a<this.options.setOrder.length;a++){e=this.options.setOrder[a],o.find("ul").append(this.raptor.getTemplate("special-characters.tab-li",{baseClass:this.options.baseClass,name:this.options.characterSets[e].name,key:e})),t=xo(this.raptor.getTemplate("special-characters.tab-content",{baseClass:this.options.baseClass,key:e}));for(var r=[],s=0;s<this.options.characterSets[e].characters.length;s++)i=this.options.characterSets[e].characters[s],n=this.raptor.getTemplate("special-characters.tab-button",{htmlEntity:i[0],description:i[1],setKey:e,charactersIndex:s}),r.push(n);t.append(r.join("")),o.find("ul").after(t)}o.show();var l=this;return o.find("button").each(function(){x(xo(this))}).click(function(){var e=xo(this).attr("data-setKey"),t=xo(this).attr("data-charactersIndex");Go=l.options.characterSets[e].characters[t][0],l.getOkButton(l.name).click.call(this)}),H(o),o},getCancelButton:function(){}})),to.prototype=Object.create(Ln.prototype),to.prototype.getElement=function(e){var t=xo(e.commonAncestorContainer.parentNode).closest("td, th");return t.length?t[0]:null},io.prototype=Object.create(qn.prototype),io.prototype.createTable=function(e){this.raptor.actionApply(function(){Ci(ot(xo(cn(e.target.cellIndex+1,e.target.parentNode.rowIndex+1,{placeHolder:"&nbsp;"}))))})},io.prototype.highlight=function(e){var t=fn(this.menuTable.get(0),{x:0,y:0},{x:e.target.cellIndex,y:e.target.parentNode.rowIndex});this.highlightRemove(e),xo(t).addClass(this.options.baseClass+"-menu-hover"),this.raptor.actionPreview(function(){Ci(ot(xo(cn(e.target.cellIndex+1,e.target.parentNode.rowIndex+1,{placeHolder:"&nbsp;"}))))})},io.prototype.highlightRemove=function(){this.menuTable.find("."+this.options.baseClass+"-menu-hover").removeClass(this.options.baseClass+"-menu-hover"),this.raptor.actionPreviewRestore()},io.prototype.getMenu=function(){return this.menu||(this.menuContent=this.raptor.getTemplate("table.create-menu",this.options),qn.prototype.getMenu.call(this).on("click","td",this.createTable.bind(this)).on("mouseenter","td",this.highlight.bind(this)).mouseleave(this.highlightRemove.bind(this)),this.menuTable=this.menu.find("table:eq(0)")),this.menu},Io.registerUi(new io),Io.registerUi(new to({name:"tableDeleteColumn",applyToElement:function(e){var t,i=gn(e),n=e.parentNode.parentNode.parentNode;return pn(e.parentNode.parentNode.parentNode,i.x),wn(n)?(n.parentNode.removeChild(n),void 0):(t=mn(n,i),!t&&i.x>0&&(t=mn(n,{x:i.x-1,y:i.y})),wi(t),void 0)}})),Io.registerUi(new to({name:"tableDeleteRow",applyToElement:function(e){var t,i=gn(e),n=e.parentNode.parentNode.parentNode;return hn(e.parentNode.parentNode.parentNode,i.y),wn(n)?(n.parentNode.removeChild(n),void 0):(t=mn(n,i),!t&&i.y>0&&(t=mn(n,{x:i.x,y:i.y-1})),wi(t),void 0)}})),Io.registerUi(new to({name:"tableInsertColumn",applyToElement:function(e){un(e.parentNode.parentNode.parentNode,gn(e).x+1,{placeHolder:"&nbsp;"})}})),Io.registerUi(new to({name:"tableInsertRow",applyToElement:function(e){dn(e.parentNode.parentNode.parentNode,gn(e).y+1,{placeHolder:"&nbsp;"})}})),Io.registerUi(new Nn({name:"tableMergeCells",action:function(){}})),Io.registerUi(new Nn({name:"tableSplitCells",action:function(){}}));var Vo=!1,Xo=null;no.prototype=Object.create(Pn.prototype),no.prototype.init=function(){this.raptor.bind("selectionCustomise",this.selectionCustomise.bind(this)),this.raptor.registerHotkey("tab",this.tabToNextCell.bind(this)),this.raptor.registerHotkey("shift+tab",this.tabToPrevCell.bind(this)),this.raptor.getElement().on("mousedown","tbody td",this.cellMouseDown.bind(this)).on("mouseover","tbody td",this.cellMouseOver.bind(this)).mouseup(this.cellMouseUp.bind(this))},no.prototype.selectionCustomise=function(){var e,t=[];return xo("."+this.options.baseClass+"-cell-selected").each(function(){e=rangy.createRange(),e.selectNodeContents(this),t.push(e)}),t},no.prototype.cellMouseDown=function(e){this.raptor.isEditing()&&(Xo=gn(e.target),null!==Xo&&(Vo=!0,xo(e.target).closest("table").addClass(this.options.baseClass+"-selected")))},no.prototype.cellMouseUp=function(e){Vo=!1;var t=xo(e.target).closest("td"),i=!1;if(t.length>0&&null!==Xo){var n=gn(t.get(0));(null===n||n.x==Xo.x&&n.y==Xo.y)&&(i=!0)}else i=!0;i&&(xo("."+this.options.baseClass+"-selected").removeClass(this.options.baseClass+"-selected"),xo("."+this.options.baseClass+"-cell-selected").removeClass(this.options.baseClass+"-cell-selected"))},no.prototype.cellMouseOver=function(e){if(Vo){var t=fn(xo(e.target).closest("table").get(0),Xo,gn(e.target));xo("."+this.options.baseClass+"-cell-selected").removeClass(this.options.baseClass+"-cell-selected"),xo(t).addClass(this.options.baseClass+"-cell-selected"),rangy.getSelection().removeAllRanges()}},no.prototype.tabToNextCell=function(){var e=rangy.getSelection().getRangeAt(0),t=ii(e),i=xo(t).closest("td");if(0===i.length)return!1;var n=i.next("td");0===n.length&&(n=i.closest("tr").next("tr").find("td:first"),0===n.length&&(n=i.closest("tbody").find("td:first"))),Jt(e,n),rangy.getSelection().setSingleRange(e)},no.prototype.tabToPrevCell=function(){var e=rangy.getSelection().getRangeAt(0),t=ii(e),i=xo(t).closest("td");if(0===i.length)return!1;var n=i.prev("td");0===n.length&&(n=i.closest("tr").prev("tr").find("td:last"),0===n.length&&(n=i.closest("tbody").find("td:last"))),Jt(e,n),rangy.getSelection().setSingleRange(e)},Io.registerPlugin(new no),oo.prototype=Object.create(zn.prototype),oo.prototype.init=function(){return this.raptor.bind("selectionChange",this.updateButton.bind(this)),zn.prototype.init.apply(this,arguments)},oo.prototype.changeTag=function(e){if("undefined"!=typeof e&&"na"!==e){var t=Di(),i=this.raptor.getElement();if(t&&!t.is(i)){var n=t.closest("td, li, #"+i.attr("id"));0!==n.length&&(i=n)}$i(e,["h1","h2","h3","h4","h5","h6","p","div","pre","address"],i)}},oo.prototype.menuItemClick=function(e){zn.prototype.menuItemClick.apply(this,arguments),this.raptor.actionApply(function(){this.changeTag(xo(e.currentTarget).data("value"))}.bind(this))},oo.prototype.menuItemMouseEnter=function(e){this.raptor.actionPreview(function(){this.changeTag(xo(e.currentTarget).data("value"))}.bind(this))},oo.prototype.menuItemMouseLeave=function(){this.raptor.actionPreviewRestore()},oo.prototype.updateButton=function(){var e=Ri()[0],t=this.getButton().getButton();if(e){var i=e.tagName.toLowerCase(),n=this.getMenu().find("[data-value="+i+"]");n.length?S(t,n.html()):S(t,l("tagMenuTagNA"))}},oo.prototype.getMenuItems=function(){return this.raptor.getTemplate("tag-menu.menu",this.options)},Io.registerUi(new oo),ao.prototype=Object.create(Mn.prototype),ao.prototype.action=function(){Wi([this.getClass()],[this.options.cssPrefix+"center",this.options.cssPrefix+"left",this.options.cssPrefix+"right",this.options.cssPrefix+"justify"],this.raptor.getElement(),"span"),this.selectionChange()},ao.prototype.selectionToggle=function(){return rangy.getSelection().getAllRanges().length>0&&Yi("."+this.getClass(),this.raptor.getElement())},Io.registerUi(new ao({name:"alignCenter",getClass:function(){return this.options.cssPrefix+"center"}})),Io.registerUi(new ao({name:"alignJustify",getClass:function(){return this.options.cssPrefix+"justify"}})),Io.registerUi(new ao({name:"alignLeft",getClass:function(){return this.options.cssPrefix+"left"}})),Io.registerUi(new ao({name:"alignRight",getClass:function(){return this.options.cssPrefix+"right"}})),Io.registerUi(new Hn({name:"textBold",hotkey:"ctrl+b",tag:"strong",classes:["bold"]})),Io.registerUi(new Hn({name:"textItalic",hotkey:"ctrl+i",tag:"em",classes:["italic"]})),Io.registerUi(new Hn({name:"textStrike",tag:"del",classes:["strike"]})),Io.registerUi(new In({name:"textSizeDecrease",action:function(){Xi(),this.raptor.selectionConstrain(),Vi("small",this.options.cssPrefix+"small","big",this.options.cssPrefix+"big"),this.raptor.getElement().find("small."+this.options.cssPrefix+"small:empty, big."+this.options.cssPrefix+"big:empty").remove()}})),Io.registerUi(new In({name:"textSizeIncrease",action:function(){Xi(),this.raptor.selectionConstrain(),Vi("big",this.options.cssPrefix+"big","small",this.options.cssPrefix+"small"),this.raptor.getElement().find("small."+this.options.cssPrefix+"small:empty, big."+this.options.cssPrefix+"big:empty").remove()}})),Io.registerUi(new Hn({name:"textUnderline",hotkey:"ctrl+u",tag:"u",classes:["underline"]})),Io.registerUi(new Hn({name:"textSub",tag:"sub",classes:["sub"]})),Io.registerUi(new Hn({name:"textSuper",tag:"sup",classes:["sup"]})),ro.prototype=Object.create(Pn.prototype),ro.prototype.init=function(){this.raptor.bind("layoutReady",function(e){xo(e).on("mouseover","[title]",function(){xo(this).attr("data-title",xo(this).attr("title")).removeAttr("title")})})},Io.registerPlugin(new ro);var _o=0,Ko=null;so.prototype=Object.create(Pn.prototype),so.prototype.enable=function(){this.raptor.bind("dirty",this.show.bind(this)),this.raptor.bind("cleaned",this.hide.bind(this))},so.prototype.show=function(){_o++,nt(this.getElement()),this.getElement().addClass(this.options.baseClass+"-visible")},so.prototype.hide=function(){0===--_o&&this.getElement().removeClass(this.options.baseClass+"-visible")},so.prototype.getElement=function(){if(!Ko){var e="raptor-plugin-unsaved-edit-warning-dirty";Ko=xo(this.raptor.getTemplate("unsaved-edit-warning.warning",this.options)).mouseenter(function(){Io.eachInstance(function(t){t.isDirty()&&t.getElement().addClass(e)})}).mouseleave(function(){xo("."+e).removeClass(e)}).appendTo("body")}return Ko},Io.registerPlugin(new so),Io.registerUi(new jn({name:"viewSource",dialogOptions:{width:600,height:400},applyAction:function(e){var t=e.find("textarea").val();this.raptor.actionApply(function(){this.raptor.setHtml(t),xi(this.raptor.getElement().first()),this.raptor.checkSelectionChange()}.bind(this))},openDialog:function(){var e=this.getDialog().find("textarea");e.val(this.raptor.getHtml()),jn.prototype.openDialog.call(this),e.select()},getDialogTemplate:function(){return xo("<div>").html(this.raptor.getTemplate("view-source.dialog",this.options))}})),Io.registerUi(new In({name:"loremIpsum",action:function(){Ci(this.raptor.getTemplate("lorem-ipsum.lorem-ipsum"))}}))}();